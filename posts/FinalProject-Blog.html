<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tina Huang">
<meta name="dcterms.date" content="2023-03-10">
<meta name="description" content="Harry Potter Books">

<title>TinaBlog - DH140 Final Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">TinaBlog</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">DH140 Final Project</h1>
                  <div>
        <div class="description">
          Harry Potter Books
        </div>
      </div>
                </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Tina Huang </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 10, 2023</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">March 17, 2023</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="the-hidden-story-within-harry-potter-books" class="level1">
<h1>The Hidden Story Within Harry Potter Books</h1>
<p>DH140 Final Project<br>
Created by Tina Huang<br>
3/20/2023</p>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>For my final project, I will be analyzing the 7 <em>Harry Potter</em> books by J.K. Rowling. <a href="https://github.com/formcept/whiteboard/tree/master/nbviewer/notebooks/data/harrypotter">The dataset</a> can be found on Github. I wanted to analyze this data because I grew up reading the books and have a renewed interest since the game “Hogwarts Legacy” recently came out. Using data analysis, is there is a significant different in sentiment over the course of each book, as well as compared across all 7 books? Additionally, how do the relationships between the characters change over the 7 books?</p>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<section id="data-preprocessing" class="level3">
<h3 class="anchored" data-anchor-id="data-preprocessing">Data Preprocessing</h3>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> readTextFile(fileName):</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    fileString <span class="op">=</span> <span class="st">""</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(fileName, <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> line <span class="kw">in</span> f:</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="kw">not</span> line.startswith(<span class="st">"Page | "</span>) <span class="kw">and</span> line.strip():</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>                fileString <span class="op">+=</span> <span class="st">" "</span> <span class="op">+</span> line.strip()</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fileString</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>book1_str <span class="op">=</span> readTextFile(<span class="st">"data/Book 1 - The Philosopher's Stone.txt"</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>book2_str <span class="op">=</span> readTextFile(<span class="st">"data/Book 2 - The Chamber of Secrets.txt"</span>)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>book3_str <span class="op">=</span> readTextFile(<span class="st">"data/Book 3 - The Prisoner of Azkaban.txt"</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>book4_str <span class="op">=</span> readTextFile(<span class="st">"data/Book 4 - The Goblet of Fire.txt"</span>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>book5_str <span class="op">=</span> readTextFile(<span class="st">"data/Book 5 - The Order of the Phoenix.txt"</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>book6_str <span class="op">=</span> readTextFile(<span class="st">"data/Book 6 - The Half Blood Prince.txt"</span>)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>book7_str <span class="op">=</span> readTextFile(<span class="st">"data/Book 7 - The Deathly Hallows.txt"</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>book_dict <span class="op">=</span> {<span class="st">"The Philosopher's Stone"</span>: book1_str, </span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>             <span class="st">"The Chamber of Secrets"</span>: book2_str, </span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>             <span class="st">"The Prisoner of Azkaban"</span>: book3_str, </span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>             <span class="st">"The Goblet of Fire"</span>: book4_str, </span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>             <span class="st">"The Order of the Phoenix"</span>: book5_str, </span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>             <span class="st">"The Half Blood Prince"</span>: book6_str, </span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>             <span class="st">"The Deathly Hallows"</span>: book7_str}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<section id="sentiment-analysis" class="level3">
<h3 class="anchored" data-anchor-id="sentiment-analysis">Sentiment Analysis</h3>
<p>I am analyzing the evolution of sentiment within the books. First, I want to take a look at the most common positive and negative words within the first book to get a sense of what themes may be present.</p>
<p>Then, I will analyze the evolution of sentiment by taking sections of 500 words and calculating the average sentiment for each section.</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> nltk</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.tokenize <span class="im">import</span> word_tokenize</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.tokenize <span class="im">import</span> sent_tokenize</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.sentiment <span class="im">import</span> vader</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.corpus <span class="im">import</span> stopwords</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.corpus <span class="im">import</span> opinion_lexicon</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> nltk.stem.porter <span class="im">import</span> PorterStemmer</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> string <span class="im">import</span> punctuation</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>nltk.download(<span class="st">'punkt'</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>nltk.download(<span class="st">'stopwords'</span>)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>nltk.download(<span class="st">'vader_lexicon'</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>nltk.download(<span class="st">'opinion_lexicon'</span>)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>sia <span class="op">=</span> vader.SentimentIntensityAnalyzer()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>[nltk_data] Downloading package punkt to /home/jovyan/nltk_data...
[nltk_data]   Package punkt is already up-to-date!
[nltk_data] Downloading package stopwords to /home/jovyan/nltk_data...
[nltk_data]   Package stopwords is already up-to-date!
[nltk_data] Downloading package vader_lexicon to
[nltk_data]     /home/jovyan/nltk_data...
[nltk_data]   Package vader_lexicon is already up-to-date!
[nltk_data] Downloading package opinion_lexicon to
[nltk_data]     /home/jovyan/nltk_data...
[nltk_data]   Package opinion_lexicon is already up-to-date!</code></pre>
</div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># analyzing book 1</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>pos_words <span class="op">=</span> []</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>neg_words <span class="op">=</span> []</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> word <span class="kw">in</span> book1_str.split():</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  comp_score <span class="op">=</span> sia.polarity_scores(word)[<span class="st">'compound'</span>]</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> comp_score <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    pos_words.append(word)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">elif</span> comp_score <span class="op">&lt;</span> <span class="dv">0</span>:</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    neg_words.append(word)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-tags="[&quot;{&quot;,&quot;&quot;tags&quot;:&quot;,&quot;[&quot;,&quot;&quot;hide-input&quot;&quot;,&quot;]&quot;,&quot;}&quot;]" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>pos_items <span class="op">=</span> nltk.FreqDist(pos_words).most_common(<span class="dv">15</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>x, y <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span>pos_items)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="bu">reversed</span>(x)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="bu">reversed</span>(y)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>plt.barh(<span class="bu">list</span>(x), <span class="bu">list</span>(y))</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Frequency"</span>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Words"</span>)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Most Common Positive words in 'The Philosopher's Stone'"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>Text(0.5, 1.0, "Most Common Positive words in 'The Philosopher's Stone'")</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="FinalProject-Blog_files/figure-html/cell-5-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-tags="[&quot;{&quot;,&quot;&quot;tags&quot;:&quot;,&quot;[&quot;,&quot;&quot;hide-input&quot;&quot;,&quot;]&quot;,&quot;}&quot;]" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>neg_items <span class="op">=</span> nltk.FreqDist(neg_words).most_common(<span class="dv">15</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>x, y <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span>neg_items)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="bu">reversed</span>(x)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> <span class="bu">reversed</span>(y)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>plt.barh(<span class="bu">list</span>(x), <span class="bu">list</span>(y))</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Frequency"</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Words"</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Most Common Negative words in 'The Philosopher's Stone'"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>Text(0.5, 1.0, "Most Common Negative words in 'The Philosopher's Stone'")</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="FinalProject-Blog_files/figure-html/cell-6-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>Through the previous 2 graphs, we can gather some overall themes of the first book, <em>The Philosopher’s Stone</em>. The most common positive words don’t give much indication of the themes, but the negative words convey a somber tone for the book. The words “kill”, “strange”, “horrible”, “empty”, “forgotten”, and “dead” suggest themes of isolation and pain, which connects to the abuse Harry Potter experiences after his parents died and left him in the care of the abusive Durselys.</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>positive_words <span class="op">=</span> <span class="bu">set</span>(opinion_lexicon.positive())</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>negative_words <span class="op">=</span> <span class="bu">set</span>(opinion_lexicon.negative())</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> sentiment_score(word):</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> word <span class="kw">in</span> positive_words:</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> word <span class="kw">in</span> negative_words:</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> total_sentiment_score(book_string):</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    words <span class="op">=</span> []</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    sent <span class="op">=</span> sent_tokenize(book_string)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> s <span class="kw">in</span> sent:</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> w <span class="kw">in</span> word_tokenize(s):</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>            words.append(w)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># calculate score for each block of 500 words</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>    scores <span class="op">=</span> []</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> i <span class="op">&lt;</span> <span class="bu">len</span>(words) <span class="op">-</span> <span class="dv">500</span>:</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>      score <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">500</span>):</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>        score <span class="op">+=</span> sentiment_score(words[x])</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>        x <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>      scores.append(score)</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>      i <span class="op">+=</span> <span class="dv">500</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> scores</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>book1_scores <span class="op">=</span> total_sentiment_score(book1_str)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>book2_scores <span class="op">=</span> total_sentiment_score(book2_str)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>book3_scores <span class="op">=</span> total_sentiment_score(book3_str)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>book4_scores <span class="op">=</span> total_sentiment_score(book4_str)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>book5_scores <span class="op">=</span> total_sentiment_score(book5_str)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>book6_scores <span class="op">=</span> total_sentiment_score(book6_str)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>book7_scores <span class="op">=</span> total_sentiment_score(book7_str)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Originally, I wished to plot all 7 books’ sentiment scores on the same graph, but I realized quickly that it would become way too messy and difficult to read. Therefore, I selected books in groups of 2 based on similar word count lengths and chronological order.</p>
<div class="cell" data-tags="[&quot;{&quot;,&quot;&quot;tags&quot;:&quot;,&quot;[&quot;,&quot;&quot;hide-input&quot;&quot;,&quot;]&quot;,&quot;}&quot;]" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># books 1 and 2</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>l1, <span class="op">=</span> ax.plot(<span class="bu">range</span>(<span class="bu">len</span>(book1_scores)), book1_scores)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>l2, <span class="op">=</span> ax.plot(<span class="bu">range</span>(<span class="bu">len</span>(book2_scores)), book2_scores)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Group Number"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Sentiment score"</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"First 2 Harry Potter Sentiment Scores"</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>ax.legend((l1, l2), (<span class="st">'Book 1'</span>, <span class="st">'Book 2'</span>), loc<span class="op">=</span><span class="st">'upper right'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>&lt;matplotlib.legend.Legend at 0x7f9d3a021480&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="FinalProject-Blog_files/figure-html/cell-9-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>I first selected books 1 and 2 to compare together since they have similar word count lengths. This graph shows that the change in sentiment over time is pretty similar for books 1 and 2. Both books reach a low negative sentiment towards the end of the book, but then increase to a positive sentiment at the very end. The major differences are that in book 2, there is a big decrease in sentiment around group 50, which is roughly in the first 1/4 or 1/5 of the book.</p>
<div class="cell" data-scrolled="true" data-tags="[&quot;{&quot;,&quot;&quot;tags&quot;:&quot;,&quot;[&quot;,&quot;&quot;hide-input&quot;&quot;,&quot;]&quot;,&quot;}&quot;]" data-execution_count="9">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># books 2 and 3</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>l2, <span class="op">=</span> ax.plot(<span class="bu">range</span>(<span class="bu">len</span>(book2_scores)), book2_scores)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>l3, <span class="op">=</span> ax.plot(<span class="bu">range</span>(<span class="bu">len</span>(book3_scores)), book3_scores)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Group Number"</span>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Sentiment score"</span>)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Harry Potter Books 2 and 3 Sentiment Scores"</span>)</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>ax.legend((l2, l3), (<span class="st">'Book 2'</span>, <span class="st">'Book 3'</span>), loc<span class="op">=</span><span class="st">'upper right'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>&lt;matplotlib.legend.Legend at 0x7f9d3958c790&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="FinalProject-Blog_files/figure-html/cell-10-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>I then compared the sentiment scores of books 2 and 3 because they also had similar word counts. Though book 3’s length is greater than book 2, the sentiment scores up to the end of book 2 follow a very similar trend. Around group number 50, both books have a sharp decrease in sentiment score. Around group 225, there is another sharp decrease in sentiment score. This implies that these books follow a similar narrative structure.</p>
<p>Book 2 has a much more maximum negative sentiment value of around -20, whereas its maximum positive sentiment value is around 14. This shows that book 2 may discuss more overall negative themes. Book 3 has an overall more negative sentiment score for the majority of the book, but then increases from -20 to 15 during the last portion of the book.</p>
<div class="cell" data-tags="[&quot;{&quot;,&quot;&quot;tags&quot;:&quot;,&quot;[&quot;,&quot;&quot;hide-input&quot;&quot;,&quot;]&quot;,&quot;}&quot;]" data-execution_count="10">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># books 4 and 7</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>l4, <span class="op">=</span> ax.plot(<span class="bu">range</span>(<span class="bu">len</span>(book4_scores)), book4_scores)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>l7, <span class="op">=</span> ax.plot(<span class="bu">range</span>(<span class="bu">len</span>(book7_scores)), book7_scores)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">"Group Number"</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="st">"Sentiment score"</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="st">"Harry Potter Books 4 and 7 Sentiment Scores"</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>ax.legend((l4, l7), (<span class="st">'Book 4'</span>, <span class="st">'Book 7'</span>), loc<span class="op">=</span><span class="st">'upper right'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>&lt;matplotlib.legend.Legend at 0x7f9d39fe6f50&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="FinalProject-Blog_files/figure-html/cell-11-output-2.png" class="img-fluid"></p>
</div>
</div>
<p>I analyzed books 4 and 7 because they have very similar word count lengths. These books are a little more different than the previous graphs, possibly due to the greater gap in time between when the books were written and published. Book 7 has an overall more negative sentiment, with a huge decrease in sentiment around group 225. Book 4 averages around a sentiment score of 0, but starts becoming slightly more negative towards the end of the book.</p>
</section>
<section id="network-visualization" class="level3">
<h3 class="anchored" data-anchor-id="network-visualization">Network Visualization</h3>
<p>I created network graphs of the characters’ relationships by counting the frequencies of interactions between characters. The frequency of interactions was counted by seeing if 2 characters’ names occured one after another. Then, I created a network graph with these character interactions.</p>
<p>Something that was challenging was figuring out when characters interacted with each other; unlike a play where the script says the full name of the character that’s speaking, a novel may refer to people by their first name, last name, both first and last name, or by a nickname. Additionally, their name may not be specified each time during the dialogue; pronouns may be used where the reader has to use reading comprehension to figure out who the pronoun is referring to. Additionally, many characters are related and have the same last name, so readers have to use reading comprehension to know which character is being referred to.</p>
<p>To simplify things, I modified the character list to include only the most common names each character is referred to as. I determined this by mostly using people’s first names, or using my knowledge of the books plus the help of the internet. For example, the name “Mr.&nbsp;Potter” is ambiguous because we don’t know which Potter that is. So, I only include “Harry”, “Albus”, and “James” since these are unique first names to differentiate the Potter men.</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> networkx <span class="im">as</span> nx</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.io <span class="im">import</span> output_notebook, show, save</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.models <span class="im">import</span> Range1d, Circle, ColumnDataSource, MultiLine, EdgesAndLinkedNodes, NodesAndLinkedEdges, LabelSet</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.plotting <span class="im">import</span> figure</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.plotting <span class="im">import</span> from_networkx</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.palettes <span class="im">import</span> Blues8, Reds8, Purples8, Oranges8, Viridis8, Spectral8</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bokeh.transform <span class="im">import</span> linear_cmap</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> networkx.algorithms <span class="im">import</span> community</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>char_names <span class="op">=</span> [ <span class="st">"Harry"</span>, <span class="st">"Hermione"</span>, <span class="st">"Ron"</span>, <span class="st">"Dumbledore"</span>, <span class="st">"Luna"</span>, <span class="st">"Dobby"</span>, <span class="st">"Hagrid"</span>, <span class="st">"Lupin"</span>, <span class="st">"Neville"</span>, <span class="st">"Lilly"</span>, <span class="st">"Tonks"</span>, </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>             <span class="st">"James"</span>, <span class="st">"Fleur"</span>, <span class="st">"Crabbe"</span>, <span class="st">"Malfoy"</span>, <span class="st">"Albus"</span>, <span class="st">"Narcissa"</span>, <span class="st">"George"</span>, <span class="st">"Percy"</span>, <span class="st">"Molly"</span>, <span class="st">"Dudley"</span>,</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>             <span class="st">"Slughorn"</span>, <span class="st">"Lily"</span>, <span class="st">"Fitwick"</span>, <span class="st">"Petunia"</span>, <span class="st">"Helena"</span>, <span class="st">"Vernon"</span>, <span class="st">"Lockhart"</span>, <span class="st">"Viktor"</span>, <span class="st">"Patil"</span>, <span class="st">"Ted"</span>, <span class="st">"Noris"</span> ]</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># return a dictionary that maps the frequency of characters' interactions</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co"># represents a bidirectional relationship between character names to the frequency of their interactions</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_char_relations(book_string):</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  char_dict <span class="op">=</span> {}</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  prev_char <span class="op">=</span> <span class="st">"Harry"</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  words <span class="op">=</span> []</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  sent <span class="op">=</span> sent_tokenize(book_string)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> s <span class="kw">in</span> sent:</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> w <span class="kw">in</span> word_tokenize(s):</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>          words.append(w)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> word <span class="kw">in</span> words:</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> word <span class="kw">in</span> char_names <span class="kw">and</span> word <span class="op">!=</span> prev_char:</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (prev_char, word) <span class="kw">in</span> char_dict:</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>        char_dict[(prev_char, word)] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>      <span class="cf">elif</span> (word, prev_char) <span class="kw">in</span> char_dict:</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>        char_dict[(word, prev_char)] <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span>:</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>        char_dict[(prev_char, word)] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>      prev_char <span class="op">=</span> word</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> char_dict</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_char_relations(book_str, bookNum):</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>  book_chars <span class="op">=</span> find_char_relations(book_str)</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># convert to a dataframe</span></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>  tuples <span class="op">=</span> book_chars.keys()</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>  df <span class="op">=</span> pd.DataFrame({<span class="st">'Source'</span>: [<span class="bu">tuple</span>[<span class="dv">0</span>] <span class="cf">for</span> <span class="bu">tuple</span> <span class="kw">in</span> tuples],</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>                     <span class="st">'Target'</span>: [<span class="bu">tuple</span>[<span class="dv">1</span>] <span class="cf">for</span> <span class="bu">tuple</span> <span class="kw">in</span> tuples],</span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>                     <span class="st">'Weight'</span>: book_chars.values()})</span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>  book_chars <span class="op">=</span> {v:k <span class="cf">for</span> k,v <span class="kw">in</span> <span class="bu">dict</span>(pd.Series(<span class="bu">list</span>(<span class="bu">set</span>(df.Target.unique()).union(<span class="bu">set</span>(df.Source.unique())))).astype(<span class="st">"category"</span>)).items()}</span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>  book_charindex_dict <span class="op">=</span> {v:k <span class="cf">for</span> k,v <span class="kw">in</span> book_chars.items()}</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>  df[<span class="st">'SourceIndex'</span>] <span class="op">=</span> [book_chars[i] <span class="cf">for</span> i <span class="kw">in</span> df[<span class="st">'Source'</span>].values]</span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>  df[<span class="st">'TargetIndex'</span>] <span class="op">=</span> [book_chars[i] <span class="cf">for</span> i <span class="kw">in</span> df[<span class="st">'Target'</span>].values]</span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>  G <span class="op">=</span> nx.from_pandas_edgelist(df, <span class="st">'SourceIndex'</span>, <span class="st">'TargetIndex'</span>, <span class="st">'Weight'</span>)</span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>  nx.set_node_attributes(G, name<span class="op">=</span><span class="st">'charname'</span>, values<span class="op">=</span>book_charindex_dict)</span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Choose colors for node and edge highlighting</span></span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>  node_highlight_color <span class="op">=</span> <span class="st">'white'</span></span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>  edge_highlight_color <span class="op">=</span> <span class="st">'black'</span></span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Choose attributes from G network to size and color by — setting manual size (e.g. 10) or color (e.g. 'skyblue') also allowed</span></span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>  size_by_this_attribute <span class="op">=</span> <span class="st">'adjusted_node_size'</span></span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a>  color_by_this_attribute <span class="op">=</span> <span class="st">'modularity_color'</span></span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Pick a color palette — Blues8, Reds8, Purples8, Oranges8, Viridis8</span></span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a>  color_palette <span class="op">=</span> Blues8</span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Choose a title!</span></span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>  title <span class="op">=</span> <span class="st">'Harry Potter Book '</span> <span class="op">+</span> <span class="bu">str</span>(bookNum) <span class="op">+</span> <span class="st">' Network'</span> </span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Establish which categories will appear when hovering over each node</span></span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>  HOVER_TOOLTIPS <span class="op">=</span> [</span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>      (<span class="st">"Character"</span>, <span class="st">"@index"</span>),</span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a>      (<span class="st">"Degree"</span>, <span class="st">"@degree"</span>),</span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a>      (<span class="st">"Modularity Class"</span>, <span class="st">"@modularity_class"</span>),</span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a>      (<span class="st">"Modularity Color"</span>, <span class="st">"$color[swatch]:modularity_color"</span>),</span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Create a plot — set dimensions, toolbar, and title</span></span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a>  plot <span class="op">=</span> figure(tooltips <span class="op">=</span> HOVER_TOOLTIPS,</span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a>                tools<span class="op">=</span><span class="st">"pan,wheel_zoom,save,reset"</span>, active_scroll<span class="op">=</span><span class="st">'wheel_zoom'</span>,</span>
<span id="cb18-70"><a href="#cb18-70" aria-hidden="true" tabindex="-1"></a>                x_range<span class="op">=</span>Range1d(<span class="op">-</span><span class="fl">10.1</span>, <span class="fl">10.1</span>), y_range<span class="op">=</span>Range1d(<span class="op">-</span><span class="fl">10.1</span>, <span class="fl">10.1</span>), title<span class="op">=</span>title)</span>
<span id="cb18-71"><a href="#cb18-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-72"><a href="#cb18-72" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Create a network graph object</span></span>
<span id="cb18-73"><a href="#cb18-73" aria-hidden="true" tabindex="-1"></a>  <span class="co"># https://networkx.github.io/documentation/networkx-1.9/reference/generated/networkx.drawing.layout.spring_layout.html</span></span>
<span id="cb18-74"><a href="#cb18-74" aria-hidden="true" tabindex="-1"></a>  network_graph <span class="op">=</span> from_networkx(G, nx.spring_layout, scale<span class="op">=</span><span class="dv">10</span>, center<span class="op">=</span>(<span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb18-75"><a href="#cb18-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-76"><a href="#cb18-76" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Set node sizes and colors according to node degree (color as category from attribute)</span></span>
<span id="cb18-77"><a href="#cb18-77" aria-hidden="true" tabindex="-1"></a>  network_graph.node_renderer.glyph <span class="op">=</span> Circle(size<span class="op">=</span>size_by_this_attribute, fill_color<span class="op">=</span>color_by_this_attribute)</span>
<span id="cb18-78"><a href="#cb18-78" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Set node highlight colors</span></span>
<span id="cb18-79"><a href="#cb18-79" aria-hidden="true" tabindex="-1"></a>  network_graph.node_renderer.hover_glyph <span class="op">=</span> Circle(size<span class="op">=</span>size_by_this_attribute, fill_color<span class="op">=</span>node_highlight_color, line_width<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb18-80"><a href="#cb18-80" aria-hidden="true" tabindex="-1"></a>  network_graph.node_renderer.selection_glyph <span class="op">=</span> Circle(size<span class="op">=</span>size_by_this_attribute, fill_color<span class="op">=</span>node_highlight_color, line_width<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb18-81"><a href="#cb18-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-82"><a href="#cb18-82" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Set edge opacity and width</span></span>
<span id="cb18-83"><a href="#cb18-83" aria-hidden="true" tabindex="-1"></a>  network_graph.edge_renderer.glyph <span class="op">=</span> MultiLine(line_alpha<span class="op">=</span><span class="fl">0.3</span>, line_width<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb18-84"><a href="#cb18-84" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Set edge highlight colors</span></span>
<span id="cb18-85"><a href="#cb18-85" aria-hidden="true" tabindex="-1"></a>  network_graph.edge_renderer.selection_glyph <span class="op">=</span> MultiLine(line_color<span class="op">=</span>edge_highlight_color, line_width<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb18-86"><a href="#cb18-86" aria-hidden="true" tabindex="-1"></a>  network_graph.edge_renderer.hover_glyph <span class="op">=</span> MultiLine(line_color<span class="op">=</span>edge_highlight_color, line_width<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb18-87"><a href="#cb18-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-88"><a href="#cb18-88" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Highlight nodes and edges</span></span>
<span id="cb18-89"><a href="#cb18-89" aria-hidden="true" tabindex="-1"></a>  network_graph.selection_policy <span class="op">=</span> NodesAndLinkedEdges()</span>
<span id="cb18-90"><a href="#cb18-90" aria-hidden="true" tabindex="-1"></a>  network_graph.inspection_policy <span class="op">=</span> NodesAndLinkedEdges()</span>
<span id="cb18-91"><a href="#cb18-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-92"><a href="#cb18-92" aria-hidden="true" tabindex="-1"></a>  plot.renderers.append(network_graph)</span>
<span id="cb18-93"><a href="#cb18-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-94"><a href="#cb18-94" aria-hidden="true" tabindex="-1"></a>  <span class="co">#Add Labels</span></span>
<span id="cb18-95"><a href="#cb18-95" aria-hidden="true" tabindex="-1"></a>  x, y <span class="op">=</span> <span class="bu">zip</span>(<span class="op">*</span>network_graph.layout_provider.graph_layout.values())</span>
<span id="cb18-96"><a href="#cb18-96" aria-hidden="true" tabindex="-1"></a>  node_labels <span class="op">=</span> <span class="bu">list</span>(G.nodes())</span>
<span id="cb18-97"><a href="#cb18-97" aria-hidden="true" tabindex="-1"></a>  source <span class="op">=</span> ColumnDataSource({<span class="st">'x'</span>: x, <span class="st">'y'</span>: y, <span class="st">'name'</span>: [book_charindex_dict[i] <span class="cf">for</span> i <span class="kw">in</span> node_labels]})</span>
<span id="cb18-98"><a href="#cb18-98" aria-hidden="true" tabindex="-1"></a>  labels <span class="op">=</span> LabelSet(x<span class="op">=</span><span class="st">'x'</span>, y<span class="op">=</span><span class="st">'y'</span>, text<span class="op">=</span><span class="st">'name'</span>, source<span class="op">=</span>source, background_fill_color<span class="op">=</span><span class="st">'white'</span>, text_font_size<span class="op">=</span><span class="st">'10px'</span>, background_fill_alpha<span class="op">=</span><span class="fl">.7</span>)</span>
<span id="cb18-99"><a href="#cb18-99" aria-hidden="true" tabindex="-1"></a>  plot.renderers.append(labels)</span>
<span id="cb18-100"><a href="#cb18-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-101"><a href="#cb18-101" aria-hidden="true" tabindex="-1"></a>  output_notebook()</span>
<span id="cb18-102"><a href="#cb18-102" aria-hidden="true" tabindex="-1"></a>  show(plot)</span>
<span id="cb18-103"><a href="#cb18-103" aria-hidden="true" tabindex="-1"></a>  save(plot, filename<span class="op">=</span><span class="ss">f"</span><span class="sc">{</span>title<span class="sc">}</span><span class="ss">.html"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-tags="[&quot;{&quot;,&quot;&quot;tags&quot;:&quot;,&quot;[&quot;,&quot;&quot;hide-input&quot;&quot;,&quot;]&quot;,&quot;}&quot;]" data-execution_count="13">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>plot_char_relations(book1_str, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
        .bk-notebook-logo {
            display: block;
            width: 20px;
            height: 20px;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAOkSURBVDiNjZRtaJVlGMd/1/08zzln5zjP1LWcU9N0NkN8m2CYjpgQYQXqSs0I84OLIC0hkEKoPtiH3gmKoiJDU7QpLgoLjLIQCpEsNJ1vqUOdO7ppbuec5+V+rj4ctwzd8IIbbi6u+8f1539dt3A78eXC7QizUF7gyV1fD1Yqg4JWz84yffhm0qkFqBogB9rM8tZdtwVsPUhWhGcFJngGeWrPzHm5oaMmkfEg1usvLFyc8jLRqDOMru7AyC8saQr7GG7f5fvDeH7Ej8CM66nIF+8yngt6HWaKh7k49Soy9nXurCi1o3qUbS3zWfrYeQDTB/Qj6kX6Ybhw4B+bOYoLKCC9H3Nu/leUTZ1JdRWkkn2ldcCamzrcf47KKXdAJllSlxAOkRgyHsGC/zRday5Qld9DyoM4/q/rUoy/CXh3jzOu3bHUVZeU+DEn8FInkPBFlu3+nW3Nw0mk6vCDiWg8CeJaxEwuHS3+z5RgY+YBR6V1Z1nxSOfoaPa4LASWxxdNp+VWTk7+4vzaou8v8PN+xo+KY2xsw6une2frhw05CTYOmQvsEhjhWjn0bmXPjpE1+kplmmkP3suftwTubK9Vq22qKmrBhpY4jvd5afdRA3wGjFAgcnTK2s4hY0/GPNIb0nErGMCRxWOOX64Z8RAC4oCXdklmEvcL8o0BfkNK4lUg9HTl+oPlQxdNo3Mg4Nv175e/1LDGzZen30MEjRUtmXSfiTVu1kK8W4txyV6BMKlbgk3lMwYCiusNy9fVfvvwMxv8Ynl6vxoByANLTWplvuj/nF9m2+PDtt1eiHPBr1oIfhCChQMBw6Aw0UulqTKZdfVvfG7VcfIqLG9bcldL/+pdWTLxLUy8Qq38heUIjh4XlzZxzQm19lLFlr8vdQ97rjZVOLf8nclzckbcD4wxXMidpX30sFd37Fv/GtwwhzhxGVAprjbg0gCAEeIgwCZyTV2Z1REEW8O4py0wsjeloKoMr6iCY6dP92H6Vw/oTyICIthibxjm/DfN9lVz8IqtqKYLUXfoKVMVQVVJOElGjrnnUt9T9wbgp8AyYKaGlqingHZU/uG2NTZSVqwHQTWkx9hxjkpWDaCg6Ckj5qebgBVbT3V3NNXMSiWSDdGV3hrtzla7J+duwPOToIg42ChPQOQjspnSlp1V+Gjdged7+8UN5CRAV7a5EdFNwCjEaBR27b3W890TE7g24NAP/mMDXRWrGoFPQI9ls/MWO2dWFAar/xcOIImbbpA3zgAAAABJRU5ErkJggg==);
        }
    </style>
    <div>
        <a href="https://bokeh.org" target="_blank" class="bk-notebook-logo"></a>
        <span id="p1135">Loading BokehJS ...</span>
    </div>
</div>
<div class="cell-output cell-output-display">

<script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  const force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

const JS_MIME_TYPE = 'application/javascript';
  const HTML_MIME_TYPE = 'text/html';
  const EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';
  const CLASS_NAME = 'output_bokeh rendered_html';

  /**
   * Render data to the DOM node
   */
  function render(props, node) {
    const script = document.createElement("script");
    node.appendChild(script);
  }

  /**
   * Handle when an output is cleared or removed
   */
  function handleClearOutput(event, handle) {
    const cell = handle.cell;

    const id = cell.output_area._bokeh_element_id;
    const server_id = cell.output_area._bokeh_server_id;
    // Clean up Bokeh references
    if (id != null && id in Bokeh.index) {
      Bokeh.index[id].model.document.clear();
      delete Bokeh.index[id];
    }

    if (server_id !== undefined) {
      // Clean up Bokeh references
      const cmd_clean = "from bokeh.io.state import curstate; print(curstate().uuid_to_server['" + server_id + "'].get_sessions()[0].document.roots[0]._id)";
      cell.notebook.kernel.execute(cmd_clean, {
        iopub: {
          output: function(msg) {
            const id = msg.content.text.trim();
            if (id in Bokeh.index) {
              Bokeh.index[id].model.document.clear();
              delete Bokeh.index[id];
            }
          }
        }
      });
      // Destroy server and session
      const cmd_destroy = "import bokeh.io.notebook as ion; ion.destroy_server('" + server_id + "')";
      cell.notebook.kernel.execute(cmd_destroy);
    }
  }

  /**
   * Handle when a new output is added
   */
  function handleAddOutput(event, handle) {
    const output_area = handle.output_area;
    const output = handle.output;

    // limit handleAddOutput to display_data with EXEC_MIME_TYPE content only
    if ((output.output_type != "display_data") || (!Object.prototype.hasOwnProperty.call(output.data, EXEC_MIME_TYPE))) {
      return
    }

    const toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);

    if (output.metadata[EXEC_MIME_TYPE]["id"] !== undefined) {
      toinsert[toinsert.length - 1].firstChild.textContent = output.data[JS_MIME_TYPE];
      // store reference to embed id on output_area
      output_area._bokeh_element_id = output.metadata[EXEC_MIME_TYPE]["id"];
    }
    if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
      const bk_div = document.createElement("div");
      bk_div.innerHTML = output.data[HTML_MIME_TYPE];
      const script_attrs = bk_div.children[0].attributes;
      for (let i = 0; i < script_attrs.length; i++) {
        toinsert[toinsert.length - 1].firstChild.setAttribute(script_attrs[i].name, script_attrs[i].value);
        toinsert[toinsert.length - 1].firstChild.textContent = bk_div.children[0].textContent
      }
      // store reference to server id on output_area
      output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
    }
  }

  function register_renderer(events, OutputArea) {

    function append_mime(data, metadata, element) {
      // create a DOM node to render to
      const toinsert = this.create_output_subarea(
        metadata,
        CLASS_NAME,
        EXEC_MIME_TYPE
      );
      this.keyboard_manager.register_events(toinsert);
      // Render to node
      const props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
      render(props, toinsert[toinsert.length - 1]);
      element.append(toinsert);
      return toinsert
    }

    /* Handle when an output is cleared or removed */
    events.on('clear_output.CodeCell', handleClearOutput);
    events.on('delete.Cell', handleClearOutput);

    /* Handle when a new output is added */
    events.on('output_added.OutputArea', handleAddOutput);

    /**
     * Register the mime type and append_mime function with output_area
     */
    OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
      /* Is output safe? */
      safe: true,
      /* Index of renderer in `output_area.display_order` */
      index: 0
    });
  }

  // register the mime type if in Jupyter Notebook environment and previously unregistered
  if (root.Jupyter !== undefined) {
    const events = require('base/js/events');
    const OutputArea = require('notebook/js/outputarea').OutputArea;

    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  }
  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  const NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded() {
    const el = document.getElementById("p1135");
    if (el != null) {
      el.textContent = "BokehJS is loading...";
    }
    if (root.Bokeh !== undefined) {
      if (el != null) {
        el.textContent = "BokehJS " + root.Bokeh.version + " successfully loaded.";
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error(url) {
      console.error("failed to load " + url);
    }

    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  const js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-3.0.3.min.js"];
  const css_urls = [];

  const inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {
    }
  ];

  function run_inline_js() {
    if (root.Bokeh !== undefined || force === true) {
          for (let i = 0; i < inline_js.length; i++) {
      inline_js[i].call(root, root.Bokeh);
    }
if (force === true) {
        display_loaded();
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    } else if (force !== true) {
      const cell = $(document.getElementById("p1135")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }
  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));
</script>
</div>
<div class="cell-output cell-output-display">

  <div id="7aac2d2d-c9ab-4de8-b19d-bf6472611aaa" data-root-id="p1003" style="display: contents;"></div>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function embed_document(root) {
  const docs_json = {"253b5b55-296b-484c-99a3-ebf1f747a0f0":{"version":"3.0.3","title":"Bokeh Application","defs":[],"roots":[{"type":"object","name":"Figure","id":"p1003","attributes":{"x_range":{"type":"object","name":"Range1d","id":"p1001","attributes":{"start":-10.1,"end":10.1}},"y_range":{"type":"object","name":"Range1d","id":"p1002","attributes":{"start":-10.1,"end":10.1}},"x_scale":{"type":"object","name":"LinearScale","id":"p1015"},"y_scale":{"type":"object","name":"LinearScale","id":"p1017"},"title":{"type":"object","name":"Title","id":"p1006","attributes":{"text":"Harry Potter Book 1 Network"}},"renderers":[{"type":"object","name":"GraphRenderer","id":"p1044","attributes":{"layout_provider":{"type":"object","name":"StaticLayoutProvider","id":"p1075","attributes":{"graph_layout":{"type":"map","entries":[[5,{"type":"ndarray","array":{"type":"bytes","data":"V8//b+t6x78aZl2NkNPmvw=="},"shape":[2],"dtype":"float64","order":"little"}],[0,{"type":"ndarray","array":{"type":"bytes","data":"Md9PiGxGC0AoQ/tjaxoRQA=="},"shape":[2],"dtype":"float64","order":"little"}],[6,{"type":"ndarray","array":{"type":"bytes","data":"AAAAAAAAJEBRhBPqNVYaQA=="},"shape":[2],"dtype":"float64","order":"little"}],[15,{"type":"ndarray","array":{"type":"bytes","data":"Q938kV0ZGkAohXu3k1XzPw=="},"shape":[2],"dtype":"float64","order":"little"}],[7,{"type":"ndarray","array":{"type":"bytes","data":"OOWS+heNFkAIE/p3EZsSwA=="},"shape":[2],"dtype":"float64","order":"little"}],[3,{"type":"ndarray","array":{"type":"bytes","data":"gBe/yuWu4L+q8nGD9x8JwA=="},"shape":[2],"dtype":"float64","order":"little"}],[1,{"type":"ndarray","array":{"type":"bytes","data":"xZyvJpSCEEBqhq9lUQMKwA=="},"shape":[2],"dtype":"float64","order":"little"}],[13,{"type":"ndarray","array":{"type":"bytes","data":"CaKr+RvoBUA1WnqdfzcewA=="},"shape":[2],"dtype":"float64","order":"little"}],[17,{"type":"ndarray","array":{"type":"bytes","data":"OKhnO5kf1D/+44Zre1T3Pw=="},"shape":[2],"dtype":"float64","order":"little"}],[8,{"type":"ndarray","array":{"type":"bytes","data":"erbmwFICDUD5qNOY9pDXvw=="},"shape":[2],"dtype":"float64","order":"little"}],[14,{"type":"ndarray","array":{"type":"bytes","data":"mZyOf076FcAVUVTdW28QwA=="},"shape":[2],"dtype":"float64","order":"little"}],[9,{"type":"ndarray","array":{"type":"bytes","data":"pW9DsFqVE8AG+e+2KjD0vw=="},"shape":[2],"dtype":"float64","order":"little"}],[16,{"type":"ndarray","array":{"type":"bytes","data":"gfdYUipyCcDwwHhhLoz2Pw=="},"shape":[2],"dtype":"float64","order":"little"}],[2,{"type":"ndarray","array":{"type":"bytes","data":"wiblLQXsFcDJlypfC3DcPw=="},"shape":[2],"dtype":"float64","order":"little"}],[11,{"type":"ndarray","array":{"type":"bytes","data":"7x+LGRQpB8B1+aoB1Vbxvw=="},"shape":[2],"dtype":"float64","order":"little"}],[10,{"type":"ndarray","array":{"type":"bytes","data":"3l1qlQmOEcDtA/Lf7CYSQA=="},"shape":[2],"dtype":"float64","order":"little"}],[4,{"type":"ndarray","array":{"type":"bytes","data":"1khUpEerAcAV3DNsvvsIQA=="},"shape":[2],"dtype":"float64","order":"little"}],[12,{"type":"ndarray","array":{"type":"bytes","data":"EVNR2MGEHMC74hmrqr0IQA=="},"shape":[2],"dtype":"float64","order":"little"}]]}}},"node_renderer":{"type":"object","name":"GlyphRenderer","id":"p1050","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1047","attributes":{"selected":{"type":"object","name":"Selection","id":"p1049","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1048"},"data":{"type":"map","entries":[["charname",["Harry","Dudley","Ted","Petunia","Albus","Dumbledore","Lily","James","Hagrid","Vernon","Percy","George","Ron","Neville","Hermione","Crabbe","Malfoy","Patil"]],["index",[5,0,6,15,7,3,1,13,17,8,14,9,16,2,11,10,4,12]]]}}},"view":{"type":"object","name":"CDSView","id":"p1051","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1052"}}},"glyph":{"type":"object","name":"Circle","id":"p1076","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"fill_color":{"type":"field","field":"modularity_color"}}},"selection_glyph":{"type":"object","name":"Circle","id":"p1092","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":"white"}}},"hover_glyph":{"type":"object","name":"Circle","id":"p1084","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":"white"}}}}},"edge_renderer":{"type":"object","name":"GlyphRenderer","id":"p1058","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1055","attributes":{"selected":{"type":"object","name":"Selection","id":"p1057","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1056"},"data":{"type":"map","entries":[["Weight",[126,44,124,331,2,94,1,27,29,401,77,5,204,14,88,2,1,27,41,5,2,1,1,1,32,2,1,9,2,1,2,1,33,1,22,13,3,4,5,1,5,3,16,43,21,9,42,1,2,1,12,6,3,4,10,1,2,1,30,163,42,6,1,34,23,2,12,2,16,3]],["start",[5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,0,0,0,0,0,0,6,15,15,15,15,7,7,7,3,3,3,3,3,3,3,3,3,3,1,1,17,17,17,17,17,17,17,8,14,14,14,14,9,9,9,9,16,16,16,16,16,2,2,2,11,11,10,4]],["end",[0,15,3,17,13,8,1,14,9,16,2,7,11,10,4,12,6,15,8,17,16,4,15,7,8,17,1,3,13,8,1,13,17,8,16,11,2,14,4,9,13,17,8,16,4,2,11,10,9,11,16,9,11,2,16,4,11,10,2,11,4,10,12,11,4,10,4,12,4,12]]]}}},"view":{"type":"object","name":"CDSView","id":"p1059","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1060"}}},"glyph":{"type":"object","name":"MultiLine","id":"p1100","attributes":{"line_alpha":{"type":"value","value":0.3}}},"selection_glyph":{"type":"object","name":"MultiLine","id":"p1108","attributes":{"line_width":{"type":"value","value":2}}},"hover_glyph":{"type":"object","name":"MultiLine","id":"p1116","attributes":{"line_width":{"type":"value","value":2}}}}},"selection_policy":{"type":"object","name":"NodesAndLinkedEdges","id":"p1124"},"inspection_policy":{"type":"object","name":"NodesAndLinkedEdges","id":"p1126"}}},{"type":"object","name":"LabelSet","id":"p1131","attributes":{"source":{"type":"object","name":"ColumnDataSource","id":"p1128","attributes":{"selected":{"type":"object","name":"Selection","id":"p1130","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1129"},"data":{"type":"map","entries":[["x",[-0.18343871086801286,3.4093866967558815,10.0,6.524771004732716,5.637786784377845,-0.5213498077289245,4.127518276661424,2.738334608602831,0.3144286232114868,3.6261344023139914,-5.494440072135284,-4.895853761783575,-3.180744784679462,-5.480488507376949,-2.895057868536234,-4.3887084337397635,-2.20863273985115,-7.129645709956791]],["y",[-0.7133257638008133,4.2758002874477725,6.584190041962828,1.208392826775091,-4.65143382514794,-3.1406088132046834,-3.2516200966063495,-7.554197750656887,1.4581255150098964,-0.3682228558015051,-4.108748873015675,-1.2617594858161865,1.4092239196289107,0.4443386487349668,-1.0836992325926904,4.53801298060078,3.1229217961622546,3.0926106803202322]],["name",["Harry","Dudley","Ted","Petunia","Albus","Dumbledore","Lily","James","Hagrid","Vernon","Percy","George","Ron","Neville","Hermione","Crabbe","Malfoy","Patil"]]]}}},"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"text":{"type":"field","field":"name"},"text_font_size":{"type":"value","value":"10px"},"background_fill_color":{"type":"value","value":"white"},"background_fill_alpha":{"type":"value","value":0.7}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p1012","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p1033"},{"type":"object","name":"WheelZoomTool","id":"p1034"},{"type":"object","name":"SaveTool","id":"p1035"},{"type":"object","name":"ResetTool","id":"p1036"},{"type":"object","name":"HoverTool","id":"p1037","attributes":{"renderers":"auto","tooltips":[["Character","@index"],["Degree","@degree"],["Modularity Class","@modularity_class"],["Modularity Color","$color[swatch]:modularity_color"]]}}],"active_scroll":{"id":"p1034"}}},"left":[{"type":"object","name":"LinearAxis","id":"p1026","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1027","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1028"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p1029"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p1019","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1020","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1021"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p1022"}}}],"center":[{"type":"object","name":"Grid","id":"p1025","attributes":{"axis":{"id":"p1019"}}},{"type":"object","name":"Grid","id":"p1032","attributes":{"dimension":1,"axis":{"id":"p1026"}}}]}}]}};
  const render_items = [{"docid":"253b5b55-296b-484c-99a3-ebf1f747a0f0","roots":{"p1003":"7aac2d2d-c9ab-4de8-b19d-bf6472611aaa"},"root_ids":["p1003"]}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_284/446730918.py:103: UserWarning: save() called but no resources were supplied and output_file(...) was never called, defaulting to resources.CDN
  save(plot, filename=f"{title}.html")
/tmp/ipykernel_284/446730918.py:103: UserWarning: save() called but no title was supplied and output_file(...) was never called, using default title 'Bokeh Plot'
  save(plot, filename=f"{title}.html")</code></pre>
</div>
</div>
<div class="cell" data-tags="[&quot;{&quot;,&quot;&quot;tags&quot;:&quot;,&quot;[&quot;,&quot;&quot;hide-input&quot;&quot;,&quot;]&quot;,&quot;}&quot;]" data-execution_count="14">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>plot_char_relations(book2_str, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
        .bk-notebook-logo {
            display: block;
            width: 20px;
            height: 20px;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAOkSURBVDiNjZRtaJVlGMd/1/08zzln5zjP1LWcU9N0NkN8m2CYjpgQYQXqSs0I84OLIC0hkEKoPtiH3gmKoiJDU7QpLgoLjLIQCpEsNJ1vqUOdO7ppbuec5+V+rj4ctwzd8IIbbi6u+8f1539dt3A78eXC7QizUF7gyV1fD1Yqg4JWz84yffhm0qkFqBogB9rM8tZdtwVsPUhWhGcFJngGeWrPzHm5oaMmkfEg1usvLFyc8jLRqDOMru7AyC8saQr7GG7f5fvDeH7Ej8CM66nIF+8yngt6HWaKh7k49Soy9nXurCi1o3qUbS3zWfrYeQDTB/Qj6kX6Ybhw4B+bOYoLKCC9H3Nu/leUTZ1JdRWkkn2ldcCamzrcf47KKXdAJllSlxAOkRgyHsGC/zRday5Qld9DyoM4/q/rUoy/CXh3jzOu3bHUVZeU+DEn8FInkPBFlu3+nW3Nw0mk6vCDiWg8CeJaxEwuHS3+z5RgY+YBR6V1Z1nxSOfoaPa4LASWxxdNp+VWTk7+4vzaou8v8PN+xo+KY2xsw6une2frhw05CTYOmQvsEhjhWjn0bmXPjpE1+kplmmkP3suftwTubK9Vq22qKmrBhpY4jvd5afdRA3wGjFAgcnTK2s4hY0/GPNIb0nErGMCRxWOOX64Z8RAC4oCXdklmEvcL8o0BfkNK4lUg9HTl+oPlQxdNo3Mg4Nv175e/1LDGzZen30MEjRUtmXSfiTVu1kK8W4txyV6BMKlbgk3lMwYCiusNy9fVfvvwMxv8Ynl6vxoByANLTWplvuj/nF9m2+PDtt1eiHPBr1oIfhCChQMBw6Aw0UulqTKZdfVvfG7VcfIqLG9bcldL/+pdWTLxLUy8Qq38heUIjh4XlzZxzQm19lLFlr8vdQ97rjZVOLf8nclzckbcD4wxXMidpX30sFd37Fv/GtwwhzhxGVAprjbg0gCAEeIgwCZyTV2Z1REEW8O4py0wsjeloKoMr6iCY6dP92H6Vw/oTyICIthibxjm/DfN9lVz8IqtqKYLUXfoKVMVQVVJOElGjrnnUt9T9wbgp8AyYKaGlqingHZU/uG2NTZSVqwHQTWkx9hxjkpWDaCg6Ckj5qebgBVbT3V3NNXMSiWSDdGV3hrtzla7J+duwPOToIg42ChPQOQjspnSlp1V+Gjdged7+8UN5CRAV7a5EdFNwCjEaBR27b3W890TE7g24NAP/mMDXRWrGoFPQI9ls/MWO2dWFAar/xcOIImbbpA3zgAAAABJRU5ErkJggg==);
        }
    </style>
    <div>
        <a href="https://bokeh.org" target="_blank" class="bk-notebook-logo"></a>
        <span id="p1943">Loading BokehJS ...</span>
    </div>
</div>
<div class="cell-output cell-output-display">

<script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  const force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

const JS_MIME_TYPE = 'application/javascript';
  const HTML_MIME_TYPE = 'text/html';
  const EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';
  const CLASS_NAME = 'output_bokeh rendered_html';

  /**
   * Render data to the DOM node
   */
  function render(props, node) {
    const script = document.createElement("script");
    node.appendChild(script);
  }

  /**
   * Handle when an output is cleared or removed
   */
  function handleClearOutput(event, handle) {
    const cell = handle.cell;

    const id = cell.output_area._bokeh_element_id;
    const server_id = cell.output_area._bokeh_server_id;
    // Clean up Bokeh references
    if (id != null && id in Bokeh.index) {
      Bokeh.index[id].model.document.clear();
      delete Bokeh.index[id];
    }

    if (server_id !== undefined) {
      // Clean up Bokeh references
      const cmd_clean = "from bokeh.io.state import curstate; print(curstate().uuid_to_server['" + server_id + "'].get_sessions()[0].document.roots[0]._id)";
      cell.notebook.kernel.execute(cmd_clean, {
        iopub: {
          output: function(msg) {
            const id = msg.content.text.trim();
            if (id in Bokeh.index) {
              Bokeh.index[id].model.document.clear();
              delete Bokeh.index[id];
            }
          }
        }
      });
      // Destroy server and session
      const cmd_destroy = "import bokeh.io.notebook as ion; ion.destroy_server('" + server_id + "')";
      cell.notebook.kernel.execute(cmd_destroy);
    }
  }

  /**
   * Handle when a new output is added
   */
  function handleAddOutput(event, handle) {
    const output_area = handle.output_area;
    const output = handle.output;

    // limit handleAddOutput to display_data with EXEC_MIME_TYPE content only
    if ((output.output_type != "display_data") || (!Object.prototype.hasOwnProperty.call(output.data, EXEC_MIME_TYPE))) {
      return
    }

    const toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);

    if (output.metadata[EXEC_MIME_TYPE]["id"] !== undefined) {
      toinsert[toinsert.length - 1].firstChild.textContent = output.data[JS_MIME_TYPE];
      // store reference to embed id on output_area
      output_area._bokeh_element_id = output.metadata[EXEC_MIME_TYPE]["id"];
    }
    if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
      const bk_div = document.createElement("div");
      bk_div.innerHTML = output.data[HTML_MIME_TYPE];
      const script_attrs = bk_div.children[0].attributes;
      for (let i = 0; i < script_attrs.length; i++) {
        toinsert[toinsert.length - 1].firstChild.setAttribute(script_attrs[i].name, script_attrs[i].value);
        toinsert[toinsert.length - 1].firstChild.textContent = bk_div.children[0].textContent
      }
      // store reference to server id on output_area
      output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
    }
  }

  function register_renderer(events, OutputArea) {

    function append_mime(data, metadata, element) {
      // create a DOM node to render to
      const toinsert = this.create_output_subarea(
        metadata,
        CLASS_NAME,
        EXEC_MIME_TYPE
      );
      this.keyboard_manager.register_events(toinsert);
      // Render to node
      const props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
      render(props, toinsert[toinsert.length - 1]);
      element.append(toinsert);
      return toinsert
    }

    /* Handle when an output is cleared or removed */
    events.on('clear_output.CodeCell', handleClearOutput);
    events.on('delete.Cell', handleClearOutput);

    /* Handle when a new output is added */
    events.on('output_added.OutputArea', handleAddOutput);

    /**
     * Register the mime type and append_mime function with output_area
     */
    OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
      /* Is output safe? */
      safe: true,
      /* Index of renderer in `output_area.display_order` */
      index: 0
    });
  }

  // register the mime type if in Jupyter Notebook environment and previously unregistered
  if (root.Jupyter !== undefined) {
    const events = require('base/js/events');
    const OutputArea = require('notebook/js/outputarea').OutputArea;

    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  }
  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  const NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded() {
    const el = document.getElementById("p1943");
    if (el != null) {
      el.textContent = "BokehJS is loading...";
    }
    if (root.Bokeh !== undefined) {
      if (el != null) {
        el.textContent = "BokehJS " + root.Bokeh.version + " successfully loaded.";
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error(url) {
      console.error("failed to load " + url);
    }

    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  const js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-3.0.3.min.js"];
  const css_urls = [];

  const inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {
    }
  ];

  function run_inline_js() {
    if (root.Bokeh !== undefined || force === true) {
          for (let i = 0; i < inline_js.length; i++) {
      inline_js[i].call(root, root.Bokeh);
    }
if (force === true) {
        display_loaded();
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    } else if (force !== true) {
      const cell = $(document.getElementById("p1943")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }
  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));
</script>
</div>
<div class="cell-output cell-output-display">

  <div id="dfe3c6b8-dcf8-4fd9-8a08-57e1e70a6cf9" data-root-id="p1811" style="display: contents;"></div>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function embed_document(root) {
  const docs_json = {"a195faee-bee0-496b-96ed-95a8673cf492":{"version":"3.0.3","title":"Bokeh Application","defs":[],"roots":[{"type":"object","name":"Figure","id":"p1811","attributes":{"x_range":{"type":"object","name":"Range1d","id":"p1809","attributes":{"start":-10.1,"end":10.1}},"y_range":{"type":"object","name":"Range1d","id":"p1810","attributes":{"start":-10.1,"end":10.1}},"x_scale":{"type":"object","name":"LinearScale","id":"p1823"},"y_scale":{"type":"object","name":"LinearScale","id":"p1825"},"title":{"type":"object","name":"Title","id":"p1814","attributes":{"text":"Harry Potter Book 2 Network"}},"renderers":[{"type":"object","name":"GraphRenderer","id":"p1852","attributes":{"layout_provider":{"type":"object","name":"StaticLayoutProvider","id":"p1883","attributes":{"graph_layout":{"type":"map","entries":[[5,{"type":"ndarray","array":{"type":"bytes","data":"xdiHSP3g4b8ioSII5Of5Pw=="},"shape":[2],"dtype":"float64","order":"little"}],[9,{"type":"ndarray","array":{"type":"bytes","data":"LSOH8LXaF8CI5kXZqskIQA=="},"shape":[2],"dtype":"float64","order":"little"}],[15,{"type":"ndarray","array":{"type":"bytes","data":"jpkruFHf+z++bER/OqrdPw=="},"shape":[2],"dtype":"float64","order":"little"}],[0,{"type":"ndarray","array":{"type":"bytes","data":"UpnE9hxU4T+hXi53oxwZQA=="},"shape":[2],"dtype":"float64","order":"little"}],[17,{"type":"ndarray","array":{"type":"bytes","data":"Z257uBTVCkBi07EJ44/zPw=="},"shape":[2],"dtype":"float64","order":"little"}],[16,{"type":"ndarray","array":{"type":"bytes","data":"tajfLW8V0b+qj31bYwLcvw=="},"shape":[2],"dtype":"float64","order":"little"}],[12,{"type":"ndarray","array":{"type":"bytes","data":"ZYhWdTc11T+ST4asqacFwA=="},"shape":[2],"dtype":"float64","order":"little"}],[3,{"type":"ndarray","array":{"type":"bytes","data":"NhWQPbWHAUC+hxu9GFoHQA=="},"shape":[2],"dtype":"float64","order":"little"}],[1,{"type":"ndarray","array":{"type":"bytes","data":"CjQoRN9IBsBgTxljMvoQQA=="},"shape":[2],"dtype":"float64","order":"little"}],[4,{"type":"ndarray","array":{"type":"bytes","data":"O5UTjD0AB8D1zBNqBIrlvw=="},"shape":[2],"dtype":"float64","order":"little"}],[8,{"type":"ndarray","array":{"type":"bytes","data":"F6ZVgahZ/78I9gNLTRIgQA=="},"shape":[2],"dtype":"float64","order":"little"}],[10,{"type":"ndarray","array":{"type":"bytes","data":"7JaLb+zmAcAJR/oXc50MwA=="},"shape":[2],"dtype":"float64","order":"little"}],[14,{"type":"ndarray","array":{"type":"bytes","data":"jkm83nbDE0AKjJdtbasGwA=="},"shape":[2],"dtype":"float64","order":"little"}],[7,{"type":"ndarray","array":{"type":"bytes","data":"1i2Wc6t+BEDEoZkZgakRwA=="},"shape":[2],"dtype":"float64","order":"little"}],[6,{"type":"ndarray","array":{"type":"bytes","data":"jBZxPQBfHMB5iGiWADQPwA=="},"shape":[2],"dtype":"float64","order":"little"}],[2,{"type":"ndarray","array":{"type":"bytes","data":"dWryQxenHECarYBhCBb4vw=="},"shape":[2],"dtype":"float64","order":"little"}],[11,{"type":"ndarray","array":{"type":"bytes","data":"h6uCGZZXGECBgJVij1kBQA=="},"shape":[2],"dtype":"float64","order":"little"}],[13,{"type":"ndarray","array":{"type":"bytes","data":"edEa6+6vFMAAAAAAAAAkwA=="},"shape":[2],"dtype":"float64","order":"little"}]]}}},"node_renderer":{"type":"object","name":"GlyphRenderer","id":"p1858","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1855","attributes":{"selected":{"type":"object","name":"Selection","id":"p1857","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1856"},"data":{"type":"map","entries":[["charname",["Harry","Vernon","Petunia","Dudley","Hagrid","Ron","Hermione","Malfoy","Dobby","Dumbledore","Albus","George","Percy","Lockhart","Molly","Neville","Crabbe","Patil"]],["index",[5,9,15,0,17,16,12,3,1,4,8,10,14,7,6,2,11,13]]]}}},"view":{"type":"object","name":"CDSView","id":"p1859","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1860"}}},"glyph":{"type":"object","name":"Circle","id":"p1884","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"fill_color":{"type":"field","field":"modularity_color"}}},"selection_glyph":{"type":"object","name":"Circle","id":"p1900","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":"white"}}},"hover_glyph":{"type":"object","name":"Circle","id":"p1892","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":"white"}}}}},"edge_renderer":{"type":"object","name":"GlyphRenderer","id":"p1866","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1863","attributes":{"selected":{"type":"object","name":"Selection","id":"p1865","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1864"},"data":{"type":"map","entries":[["Weight",[49,24,38,128,654,206,150,158,122,96,38,198,6,21,15,3,14,6,3,1,1,11,1,1,1,5,1,1,45,2,14,2,14,13,25,3,1,1,219,4,25,63,42,72,24,2,9,19,22,8,1,4,26,6,7,1,8,5,12,30,13,16,3,10,7,1,6,1,8,1,23,1,1,15,5,3,1,1,11]],["start",[5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,9,9,9,9,9,15,15,15,15,0,0,0,17,17,17,17,17,17,17,17,17,17,16,16,16,16,16,16,16,16,16,16,12,12,12,12,12,12,12,12,12,12,3,3,3,3,3,3,3,3,1,1,4,4,4,4,4,10,10,10,14,14,7]],["end",[9,15,0,17,16,12,3,1,4,10,14,7,6,2,11,8,15,0,1,10,16,0,1,7,14,16,3,12,16,1,12,10,3,7,4,14,2,8,12,1,10,3,14,7,4,6,2,11,3,14,6,10,7,2,4,13,11,1,10,4,7,11,2,1,14,8,4,8,8,10,7,13,11,14,7,6,2,11,2]]]}}},"view":{"type":"object","name":"CDSView","id":"p1867","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1868"}}},"glyph":{"type":"object","name":"MultiLine","id":"p1908","attributes":{"line_alpha":{"type":"value","value":0.3}}},"selection_glyph":{"type":"object","name":"MultiLine","id":"p1916","attributes":{"line_width":{"type":"value","value":2}}},"hover_glyph":{"type":"object","name":"MultiLine","id":"p1924","attributes":{"line_width":{"type":"value","value":2}}}}},"selection_policy":{"type":"object","name":"NodesAndLinkedEdges","id":"p1932"},"inspection_policy":{"type":"object","name":"NodesAndLinkedEdges","id":"p1934"}}},{"type":"object","name":"LabelSet","id":"p1939","attributes":{"source":{"type":"object","name":"ColumnDataSource","id":"p1936","attributes":{"selected":{"type":"object","name":"Selection","id":"p1938","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1937"},"data":{"type":"map","entries":[["x",[-0.5587145248998914,-5.963584669349797,1.7420212930825048,0.5415177173315817,3.3540434277218085,-0.2669332454667129,0.3313730855826463,2.1912636575313185,-2.785582096554667,-2.8751173919178235,-1.9593892147189587,-2.2377556528543803,4.940883140794893,2.561850455303765,-7.092774353053425,7.163174688025369,6.08553352222487,-5.171809838783127]],["y",[1.6191139524253875,3.0984703993279403,0.46351492336698275,6.2779673215915475,1.2226286295601416,-0.4376457589589743,-2.7068665960777674,2.918992497828156,4.244332836551479,-0.673097808058087,8.035745949014213,-3.5768796799901605,-2.8337048112748606,-4.415531539918849,-3.900391745629403,-1.5053790863702035,2.1687305166124706,-10.0]],["name",["Harry","Vernon","Petunia","Dudley","Hagrid","Ron","Hermione","Malfoy","Dobby","Dumbledore","Albus","George","Percy","Lockhart","Molly","Neville","Crabbe","Patil"]]]}}},"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"text":{"type":"field","field":"name"},"text_font_size":{"type":"value","value":"10px"},"background_fill_color":{"type":"value","value":"white"},"background_fill_alpha":{"type":"value","value":0.7}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p1820","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p1841"},{"type":"object","name":"WheelZoomTool","id":"p1842"},{"type":"object","name":"SaveTool","id":"p1843"},{"type":"object","name":"ResetTool","id":"p1844"},{"type":"object","name":"HoverTool","id":"p1845","attributes":{"renderers":"auto","tooltips":[["Character","@index"],["Degree","@degree"],["Modularity Class","@modularity_class"],["Modularity Color","$color[swatch]:modularity_color"]]}}],"active_scroll":{"id":"p1842"}}},"left":[{"type":"object","name":"LinearAxis","id":"p1834","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1835","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1836"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p1837"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p1827","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1828","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1829"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p1830"}}}],"center":[{"type":"object","name":"Grid","id":"p1833","attributes":{"axis":{"id":"p1827"}}},{"type":"object","name":"Grid","id":"p1840","attributes":{"dimension":1,"axis":{"id":"p1834"}}}]}}]}};
  const render_items = [{"docid":"a195faee-bee0-496b-96ed-95a8673cf492","roots":{"p1811":"dfe3c6b8-dcf8-4fd9-8a08-57e1e70a6cf9"},"root_ids":["p1811"]}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_284/446730918.py:103: UserWarning: save() called but no resources were supplied and output_file(...) was never called, defaulting to resources.CDN
  save(plot, filename=f"{title}.html")
/tmp/ipykernel_284/446730918.py:103: UserWarning: save() called but no title was supplied and output_file(...) was never called, using default title 'Bokeh Plot'
  save(plot, filename=f"{title}.html")</code></pre>
</div>
</div>
<div class="cell" data-tags="[&quot;{&quot;,&quot;&quot;tags&quot;:&quot;,&quot;[&quot;,&quot;&quot;hide-input&quot;&quot;,&quot;]&quot;,&quot;}&quot;]" data-execution_count="15">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>plot_char_relations(book3_str, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
        .bk-notebook-logo {
            display: block;
            width: 20px;
            height: 20px;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAOkSURBVDiNjZRtaJVlGMd/1/08zzln5zjP1LWcU9N0NkN8m2CYjpgQYQXqSs0I84OLIC0hkEKoPtiH3gmKoiJDU7QpLgoLjLIQCpEsNJ1vqUOdO7ppbuec5+V+rj4ctwzd8IIbbi6u+8f1539dt3A78eXC7QizUF7gyV1fD1Yqg4JWz84yffhm0qkFqBogB9rM8tZdtwVsPUhWhGcFJngGeWrPzHm5oaMmkfEg1usvLFyc8jLRqDOMru7AyC8saQr7GG7f5fvDeH7Ej8CM66nIF+8yngt6HWaKh7k49Soy9nXurCi1o3qUbS3zWfrYeQDTB/Qj6kX6Ybhw4B+bOYoLKCC9H3Nu/leUTZ1JdRWkkn2ldcCamzrcf47KKXdAJllSlxAOkRgyHsGC/zRday5Qld9DyoM4/q/rUoy/CXh3jzOu3bHUVZeU+DEn8FInkPBFlu3+nW3Nw0mk6vCDiWg8CeJaxEwuHS3+z5RgY+YBR6V1Z1nxSOfoaPa4LASWxxdNp+VWTk7+4vzaou8v8PN+xo+KY2xsw6une2frhw05CTYOmQvsEhjhWjn0bmXPjpE1+kplmmkP3suftwTubK9Vq22qKmrBhpY4jvd5afdRA3wGjFAgcnTK2s4hY0/GPNIb0nErGMCRxWOOX64Z8RAC4oCXdklmEvcL8o0BfkNK4lUg9HTl+oPlQxdNo3Mg4Nv175e/1LDGzZen30MEjRUtmXSfiTVu1kK8W4txyV6BMKlbgk3lMwYCiusNy9fVfvvwMxv8Ynl6vxoByANLTWplvuj/nF9m2+PDtt1eiHPBr1oIfhCChQMBw6Aw0UulqTKZdfVvfG7VcfIqLG9bcldL/+pdWTLxLUy8Qq38heUIjh4XlzZxzQm19lLFlr8vdQ97rjZVOLf8nclzckbcD4wxXMidpX30sFd37Fv/GtwwhzhxGVAprjbg0gCAEeIgwCZyTV2Z1REEW8O4py0wsjeloKoMr6iCY6dP92H6Vw/oTyICIthibxjm/DfN9lVz8IqtqKYLUXfoKVMVQVVJOElGjrnnUt9T9wbgp8AyYKaGlqingHZU/uG2NTZSVqwHQTWkx9hxjkpWDaCg6Ckj5qebgBVbT3V3NNXMSiWSDdGV3hrtzla7J+duwPOToIg42ChPQOQjspnSlp1V+Gjdged7+8UN5CRAV7a5EdFNwCjEaBR27b3W890TE7g24NAP/mMDXRWrGoFPQI9ls/MWO2dWFAar/xcOIImbbpA3zgAAAABJRU5ErkJggg==);
        }
    </style>
    <div>
        <a href="https://bokeh.org" target="_blank" class="bk-notebook-logo"></a>
        <span id="p2850">Loading BokehJS ...</span>
    </div>
</div>
<div class="cell-output cell-output-display">

<script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  const force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

const JS_MIME_TYPE = 'application/javascript';
  const HTML_MIME_TYPE = 'text/html';
  const EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';
  const CLASS_NAME = 'output_bokeh rendered_html';

  /**
   * Render data to the DOM node
   */
  function render(props, node) {
    const script = document.createElement("script");
    node.appendChild(script);
  }

  /**
   * Handle when an output is cleared or removed
   */
  function handleClearOutput(event, handle) {
    const cell = handle.cell;

    const id = cell.output_area._bokeh_element_id;
    const server_id = cell.output_area._bokeh_server_id;
    // Clean up Bokeh references
    if (id != null && id in Bokeh.index) {
      Bokeh.index[id].model.document.clear();
      delete Bokeh.index[id];
    }

    if (server_id !== undefined) {
      // Clean up Bokeh references
      const cmd_clean = "from bokeh.io.state import curstate; print(curstate().uuid_to_server['" + server_id + "'].get_sessions()[0].document.roots[0]._id)";
      cell.notebook.kernel.execute(cmd_clean, {
        iopub: {
          output: function(msg) {
            const id = msg.content.text.trim();
            if (id in Bokeh.index) {
              Bokeh.index[id].model.document.clear();
              delete Bokeh.index[id];
            }
          }
        }
      });
      // Destroy server and session
      const cmd_destroy = "import bokeh.io.notebook as ion; ion.destroy_server('" + server_id + "')";
      cell.notebook.kernel.execute(cmd_destroy);
    }
  }

  /**
   * Handle when a new output is added
   */
  function handleAddOutput(event, handle) {
    const output_area = handle.output_area;
    const output = handle.output;

    // limit handleAddOutput to display_data with EXEC_MIME_TYPE content only
    if ((output.output_type != "display_data") || (!Object.prototype.hasOwnProperty.call(output.data, EXEC_MIME_TYPE))) {
      return
    }

    const toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);

    if (output.metadata[EXEC_MIME_TYPE]["id"] !== undefined) {
      toinsert[toinsert.length - 1].firstChild.textContent = output.data[JS_MIME_TYPE];
      // store reference to embed id on output_area
      output_area._bokeh_element_id = output.metadata[EXEC_MIME_TYPE]["id"];
    }
    if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
      const bk_div = document.createElement("div");
      bk_div.innerHTML = output.data[HTML_MIME_TYPE];
      const script_attrs = bk_div.children[0].attributes;
      for (let i = 0; i < script_attrs.length; i++) {
        toinsert[toinsert.length - 1].firstChild.setAttribute(script_attrs[i].name, script_attrs[i].value);
        toinsert[toinsert.length - 1].firstChild.textContent = bk_div.children[0].textContent
      }
      // store reference to server id on output_area
      output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
    }
  }

  function register_renderer(events, OutputArea) {

    function append_mime(data, metadata, element) {
      // create a DOM node to render to
      const toinsert = this.create_output_subarea(
        metadata,
        CLASS_NAME,
        EXEC_MIME_TYPE
      );
      this.keyboard_manager.register_events(toinsert);
      // Render to node
      const props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
      render(props, toinsert[toinsert.length - 1]);
      element.append(toinsert);
      return toinsert
    }

    /* Handle when an output is cleared or removed */
    events.on('clear_output.CodeCell', handleClearOutput);
    events.on('delete.Cell', handleClearOutput);

    /* Handle when a new output is added */
    events.on('output_added.OutputArea', handleAddOutput);

    /**
     * Register the mime type and append_mime function with output_area
     */
    OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
      /* Is output safe? */
      safe: true,
      /* Index of renderer in `output_area.display_order` */
      index: 0
    });
  }

  // register the mime type if in Jupyter Notebook environment and previously unregistered
  if (root.Jupyter !== undefined) {
    const events = require('base/js/events');
    const OutputArea = require('notebook/js/outputarea').OutputArea;

    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  }
  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  const NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded() {
    const el = document.getElementById("p2850");
    if (el != null) {
      el.textContent = "BokehJS is loading...";
    }
    if (root.Bokeh !== undefined) {
      if (el != null) {
        el.textContent = "BokehJS " + root.Bokeh.version + " successfully loaded.";
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error(url) {
      console.error("failed to load " + url);
    }

    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  const js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-3.0.3.min.js"];
  const css_urls = [];

  const inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {
    }
  ];

  function run_inline_js() {
    if (root.Bokeh !== undefined || force === true) {
          for (let i = 0; i < inline_js.length; i++) {
      inline_js[i].call(root, root.Bokeh);
    }
if (force === true) {
        display_loaded();
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    } else if (force !== true) {
      const cell = $(document.getElementById("p2850")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }
  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));
</script>
</div>
<div class="cell-output cell-output-display">

  <div id="ac5eee65-b6d0-4f4f-9fee-77685f67fd71" data-root-id="p2718" style="display: contents;"></div>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function embed_document(root) {
  const docs_json = {"62226e22-92ee-4ea7-9275-a03763f78a74":{"version":"3.0.3","title":"Bokeh Application","defs":[],"roots":[{"type":"object","name":"Figure","id":"p2718","attributes":{"x_range":{"type":"object","name":"Range1d","id":"p2716","attributes":{"start":-10.1,"end":10.1}},"y_range":{"type":"object","name":"Range1d","id":"p2717","attributes":{"start":-10.1,"end":10.1}},"x_scale":{"type":"object","name":"LinearScale","id":"p2730"},"y_scale":{"type":"object","name":"LinearScale","id":"p2732"},"title":{"type":"object","name":"Title","id":"p2721","attributes":{"text":"Harry Potter Book 3 Network"}},"renderers":[{"type":"object","name":"GraphRenderer","id":"p2759","attributes":{"layout_provider":{"type":"object","name":"StaticLayoutProvider","id":"p2790","attributes":{"graph_layout":{"type":"map","entries":[[5,{"type":"ndarray","array":{"type":"bytes","data":"9ByKEo2r9z+JvQphEJXePw=="},"shape":[2],"dtype":"float64","order":"little"}],[8,{"type":"ndarray","array":{"type":"bytes","data":"O3cK9T+bF0CVK1tWuVADwA=="},"shape":[2],"dtype":"float64","order":"little"}],[16,{"type":"ndarray","array":{"type":"bytes","data":"tYsZuLI/I0DspZonSdwMwA=="},"shape":[2],"dtype":"float64","order":"little"}],[0,{"type":"ndarray","array":{"type":"bytes","data":"AAAAAAAAJEAl6iaQnx7Uvw=="},"shape":[2],"dtype":"float64","order":"little"}],[15,{"type":"ndarray","array":{"type":"bytes","data":"3BrpSJ0D9b8WW07fGHXyvw=="},"shape":[2],"dtype":"float64","order":"little"}],[11,{"type":"ndarray","array":{"type":"bytes","data":"Lb4LATVKwT8XA9EjPoX2vw=="},"shape":[2],"dtype":"float64","order":"little"}],[1,{"type":"ndarray","array":{"type":"bytes","data":"aU0WZ6vMGcDE+K4OqtoIQA=="},"shape":[2],"dtype":"float64","order":"little"}],[13,{"type":"ndarray","array":{"type":"bytes","data":"5kCyO2zbF8AlEo2Y8PX8vw=="},"shape":[2],"dtype":"float64","order":"little"}],[14,{"type":"ndarray","array":{"type":"bytes","data":"Pw13OhQfFsBNRGNO0XzTvw=="},"shape":[2],"dtype":"float64","order":"little"}],[10,{"type":"ndarray","array":{"type":"bytes","data":"TUq4KexBEMAR5WMne18VwA=="},"shape":[2],"dtype":"float64","order":"little"}],[17,{"type":"ndarray","array":{"type":"bytes","data":"gYOvIsb3DsD60ldZrCAAwA=="},"shape":[2],"dtype":"float64","order":"little"}],[2,{"type":"ndarray","array":{"type":"bytes","data":"NQYKhSPtCcBnB234RO7mPw=="},"shape":[2],"dtype":"float64","order":"little"}],[6,{"type":"ndarray","array":{"type":"bytes","data":"mdIzSj1TIUB14jLubgsbQA=="},"shape":[2],"dtype":"float64","order":"little"}],[7,{"type":"ndarray","array":{"type":"bytes","data":"tT879cUaBECXwnVFwpgVQA=="},"shape":[2],"dtype":"float64","order":"little"}],[4,{"type":"ndarray","array":{"type":"bytes","data":"fKhqT+a8B8DKzEcNTvYFQA=="},"shape":[2],"dtype":"float64","order":"little"}],[18,{"type":"ndarray","array":{"type":"bytes","data":"dHHh83vT+L+pTbLciPzsPw=="},"shape":[2],"dtype":"float64","order":"little"}],[3,{"type":"ndarray","array":{"type":"bytes","data":"DEtIt8L1AcCfJIh8410MwA=="},"shape":[2],"dtype":"float64","order":"little"}],[9,{"type":"ndarray","array":{"type":"bytes","data":"XpGrrgiv1z983weNkhUSwA=="},"shape":[2],"dtype":"float64","order":"little"}],[12,{"type":"ndarray","array":{"type":"bytes","data":"9aje+QLQ97/RydHQR00ZQA=="},"shape":[2],"dtype":"float64","order":"little"}]]}}},"node_renderer":{"type":"object","name":"GlyphRenderer","id":"p2765","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p2762","attributes":{"selected":{"type":"object","name":"Selection","id":"p2764","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p2763"},"data":{"type":"map","entries":[["charname",["Harry","Vernon","Petunia","Dudley","Ron","Hermione","Lily","James","Percy","George","Hagrid","Neville","Molly","Albus","Dumbledore","Lupin","Malfoy","Crabbe","Patil"]],["index",[5,8,16,0,15,11,1,13,14,10,17,2,6,7,4,18,3,9,12]]]}}},"view":{"type":"object","name":"CDSView","id":"p2766","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2767"}}},"glyph":{"type":"object","name":"Circle","id":"p2791","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"fill_color":{"type":"field","field":"modularity_color"}}},"selection_glyph":{"type":"object","name":"Circle","id":"p2807","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":"white"}}},"hover_glyph":{"type":"object","name":"Circle","id":"p2799","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":"white"}}}}},"edge_renderer":{"type":"object","name":"GlyphRenderer","id":"p2773","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p2770","attributes":{"selected":{"type":"object","name":"Selection","id":"p2772","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p2771"},"data":{"type":"map","entries":[["Weight",[91,22,24,596,520,8,14,49,68,189,74,8,4,114,331,137,27,2,25,13,8,1,7,403,30,13,52,92,57,15,1,10,6,1,9,74,6,13,80,13,2,35,1,3,17,2,2,3,6,1,2,10,12,1,12,2,1,6,2,5,23,34,1,2,42,1,2,1,5,30,5,10,1,37]],["start",[5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,8,8,8,8,16,15,15,15,15,15,15,15,15,15,15,15,11,11,11,11,11,11,11,11,11,11,1,1,1,1,13,13,13,13,14,14,14,14,14,10,10,17,17,17,17,17,2,2,2,2,7,4,4,18,18,3]],["end",[8,0,16,15,11,1,13,14,10,17,2,6,7,4,18,3,9,12,16,0,15,11,0,11,14,10,17,18,3,2,12,4,9,13,14,18,10,2,17,3,9,4,7,13,13,4,17,18,4,10,17,18,10,2,4,17,3,3,17,18,4,3,2,9,18,12,3,9,4,18,3,3,9,9]]]}}},"view":{"type":"object","name":"CDSView","id":"p2774","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p2775"}}},"glyph":{"type":"object","name":"MultiLine","id":"p2815","attributes":{"line_alpha":{"type":"value","value":0.3}}},"selection_glyph":{"type":"object","name":"MultiLine","id":"p2823","attributes":{"line_width":{"type":"value","value":2}}},"hover_glyph":{"type":"object","name":"MultiLine","id":"p2831","attributes":{"line_width":{"type":"value","value":2}}}}},"selection_policy":{"type":"object","name":"NodesAndLinkedEdges","id":"p2839"},"inspection_policy":{"type":"object","name":"NodesAndLinkedEdges","id":"p2841"}}},{"type":"object","name":"LabelSet","id":"p2846","attributes":{"source":{"type":"object","name":"ColumnDataSource","id":"p2843","attributes":{"selected":{"type":"object","name":"Selection","id":"p2845","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p2844"},"data":{"type":"map","entries":[["x",[1.4793825840186487,5.901611164821413,9.624410393827796,10.0,-1.3133824203557003,0.13507711936061764,-6.449872599350194,-5.964280064348918,-5.530350602642385,-4.0643774527294,-3.8709833822071578,-3.240790404671112,8.662576979471213,2.513072887297279,-2.9672361568855745,-1.5516318823420905,-2.2450002974450225,0.37005822236667096,-1.4882840881860464]],["y",[0.4778481433558786,-2.414416002900405,-3.6075614065236916,-0.3143690974935985,-1.1535881731885573,-1.4075299643593036,3.1067696711680544,-1.8100439032579143,-0.30449326186232356,-5.3432432322236005,-2.0159537296225354,0.7165856220310446,6.761165353637456,5.399178586304195,2.745266059640561,0.9058269796827761,-3.5458440522239267,-4.521066859822778,6.325469267658677]],["name",["Harry","Vernon","Petunia","Dudley","Ron","Hermione","Lily","James","Percy","George","Hagrid","Neville","Molly","Albus","Dumbledore","Lupin","Malfoy","Crabbe","Patil"]]]}}},"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"text":{"type":"field","field":"name"},"text_font_size":{"type":"value","value":"10px"},"background_fill_color":{"type":"value","value":"white"},"background_fill_alpha":{"type":"value","value":0.7}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p2727","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p2748"},{"type":"object","name":"WheelZoomTool","id":"p2749"},{"type":"object","name":"SaveTool","id":"p2750"},{"type":"object","name":"ResetTool","id":"p2751"},{"type":"object","name":"HoverTool","id":"p2752","attributes":{"renderers":"auto","tooltips":[["Character","@index"],["Degree","@degree"],["Modularity Class","@modularity_class"],["Modularity Color","$color[swatch]:modularity_color"]]}}],"active_scroll":{"id":"p2749"}}},"left":[{"type":"object","name":"LinearAxis","id":"p2741","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p2742","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p2743"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p2744"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p2734","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p2735","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p2736"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p2737"}}}],"center":[{"type":"object","name":"Grid","id":"p2740","attributes":{"axis":{"id":"p2734"}}},{"type":"object","name":"Grid","id":"p2747","attributes":{"dimension":1,"axis":{"id":"p2741"}}}]}}]}};
  const render_items = [{"docid":"62226e22-92ee-4ea7-9275-a03763f78a74","roots":{"p2718":"ac5eee65-b6d0-4f4f-9fee-77685f67fd71"},"root_ids":["p2718"]}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_284/446730918.py:103: UserWarning: save() called but no resources were supplied and output_file(...) was never called, defaulting to resources.CDN
  save(plot, filename=f"{title}.html")
/tmp/ipykernel_284/446730918.py:103: UserWarning: save() called but no title was supplied and output_file(...) was never called, using default title 'Bokeh Plot'
  save(plot, filename=f"{title}.html")</code></pre>
</div>
</div>
<div class="cell" data-tags="[&quot;{&quot;,&quot;&quot;tags&quot;:&quot;,&quot;[&quot;,&quot;&quot;hide-input&quot;&quot;,&quot;]&quot;,&quot;}&quot;]" data-execution_count="16">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>plot_char_relations(book4_str, <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
        .bk-notebook-logo {
            display: block;
            width: 20px;
            height: 20px;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAOkSURBVDiNjZRtaJVlGMd/1/08zzln5zjP1LWcU9N0NkN8m2CYjpgQYQXqSs0I84OLIC0hkEKoPtiH3gmKoiJDU7QpLgoLjLIQCpEsNJ1vqUOdO7ppbuec5+V+rj4ctwzd8IIbbi6u+8f1539dt3A78eXC7QizUF7gyV1fD1Yqg4JWz84yffhm0qkFqBogB9rM8tZdtwVsPUhWhGcFJngGeWrPzHm5oaMmkfEg1usvLFyc8jLRqDOMru7AyC8saQr7GG7f5fvDeH7Ej8CM66nIF+8yngt6HWaKh7k49Soy9nXurCi1o3qUbS3zWfrYeQDTB/Qj6kX6Ybhw4B+bOYoLKCC9H3Nu/leUTZ1JdRWkkn2ldcCamzrcf47KKXdAJllSlxAOkRgyHsGC/zRday5Qld9DyoM4/q/rUoy/CXh3jzOu3bHUVZeU+DEn8FInkPBFlu3+nW3Nw0mk6vCDiWg8CeJaxEwuHS3+z5RgY+YBR6V1Z1nxSOfoaPa4LASWxxdNp+VWTk7+4vzaou8v8PN+xo+KY2xsw6une2frhw05CTYOmQvsEhjhWjn0bmXPjpE1+kplmmkP3suftwTubK9Vq22qKmrBhpY4jvd5afdRA3wGjFAgcnTK2s4hY0/GPNIb0nErGMCRxWOOX64Z8RAC4oCXdklmEvcL8o0BfkNK4lUg9HTl+oPlQxdNo3Mg4Nv175e/1LDGzZen30MEjRUtmXSfiTVu1kK8W4txyV6BMKlbgk3lMwYCiusNy9fVfvvwMxv8Ynl6vxoByANLTWplvuj/nF9m2+PDtt1eiHPBr1oIfhCChQMBw6Aw0UulqTKZdfVvfG7VcfIqLG9bcldL/+pdWTLxLUy8Qq38heUIjh4XlzZxzQm19lLFlr8vdQ97rjZVOLf8nclzckbcD4wxXMidpX30sFd37Fv/GtwwhzhxGVAprjbg0gCAEeIgwCZyTV2Z1REEW8O4py0wsjeloKoMr6iCY6dP92H6Vw/oTyICIthibxjm/DfN9lVz8IqtqKYLUXfoKVMVQVVJOElGjrnnUt9T9wbgp8AyYKaGlqingHZU/uG2NTZSVqwHQTWkx9hxjkpWDaCg6Ckj5qebgBVbT3V3NNXMSiWSDdGV3hrtzla7J+duwPOToIg42ChPQOQjspnSlp1V+Gjdged7+8UN5CRAV7a5EdFNwCjEaBR27b3W890TE7g24NAP/mMDXRWrGoFPQI9ls/MWO2dWFAar/xcOIImbbpA3zgAAAABJRU5ErkJggg==);
        }
    </style>
    <div>
        <a href="https://bokeh.org" target="_blank" class="bk-notebook-logo"></a>
        <span id="p3792">Loading BokehJS ...</span>
    </div>
</div>
<div class="cell-output cell-output-display">

<script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  const force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

const JS_MIME_TYPE = 'application/javascript';
  const HTML_MIME_TYPE = 'text/html';
  const EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';
  const CLASS_NAME = 'output_bokeh rendered_html';

  /**
   * Render data to the DOM node
   */
  function render(props, node) {
    const script = document.createElement("script");
    node.appendChild(script);
  }

  /**
   * Handle when an output is cleared or removed
   */
  function handleClearOutput(event, handle) {
    const cell = handle.cell;

    const id = cell.output_area._bokeh_element_id;
    const server_id = cell.output_area._bokeh_server_id;
    // Clean up Bokeh references
    if (id != null && id in Bokeh.index) {
      Bokeh.index[id].model.document.clear();
      delete Bokeh.index[id];
    }

    if (server_id !== undefined) {
      // Clean up Bokeh references
      const cmd_clean = "from bokeh.io.state import curstate; print(curstate().uuid_to_server['" + server_id + "'].get_sessions()[0].document.roots[0]._id)";
      cell.notebook.kernel.execute(cmd_clean, {
        iopub: {
          output: function(msg) {
            const id = msg.content.text.trim();
            if (id in Bokeh.index) {
              Bokeh.index[id].model.document.clear();
              delete Bokeh.index[id];
            }
          }
        }
      });
      // Destroy server and session
      const cmd_destroy = "import bokeh.io.notebook as ion; ion.destroy_server('" + server_id + "')";
      cell.notebook.kernel.execute(cmd_destroy);
    }
  }

  /**
   * Handle when a new output is added
   */
  function handleAddOutput(event, handle) {
    const output_area = handle.output_area;
    const output = handle.output;

    // limit handleAddOutput to display_data with EXEC_MIME_TYPE content only
    if ((output.output_type != "display_data") || (!Object.prototype.hasOwnProperty.call(output.data, EXEC_MIME_TYPE))) {
      return
    }

    const toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);

    if (output.metadata[EXEC_MIME_TYPE]["id"] !== undefined) {
      toinsert[toinsert.length - 1].firstChild.textContent = output.data[JS_MIME_TYPE];
      // store reference to embed id on output_area
      output_area._bokeh_element_id = output.metadata[EXEC_MIME_TYPE]["id"];
    }
    if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
      const bk_div = document.createElement("div");
      bk_div.innerHTML = output.data[HTML_MIME_TYPE];
      const script_attrs = bk_div.children[0].attributes;
      for (let i = 0; i < script_attrs.length; i++) {
        toinsert[toinsert.length - 1].firstChild.setAttribute(script_attrs[i].name, script_attrs[i].value);
        toinsert[toinsert.length - 1].firstChild.textContent = bk_div.children[0].textContent
      }
      // store reference to server id on output_area
      output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
    }
  }

  function register_renderer(events, OutputArea) {

    function append_mime(data, metadata, element) {
      // create a DOM node to render to
      const toinsert = this.create_output_subarea(
        metadata,
        CLASS_NAME,
        EXEC_MIME_TYPE
      );
      this.keyboard_manager.register_events(toinsert);
      // Render to node
      const props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
      render(props, toinsert[toinsert.length - 1]);
      element.append(toinsert);
      return toinsert
    }

    /* Handle when an output is cleared or removed */
    events.on('clear_output.CodeCell', handleClearOutput);
    events.on('delete.Cell', handleClearOutput);

    /* Handle when a new output is added */
    events.on('output_added.OutputArea', handleAddOutput);

    /**
     * Register the mime type and append_mime function with output_area
     */
    OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
      /* Is output safe? */
      safe: true,
      /* Index of renderer in `output_area.display_order` */
      index: 0
    });
  }

  // register the mime type if in Jupyter Notebook environment and previously unregistered
  if (root.Jupyter !== undefined) {
    const events = require('base/js/events');
    const OutputArea = require('notebook/js/outputarea').OutputArea;

    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  }
  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  const NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded() {
    const el = document.getElementById("p3792");
    if (el != null) {
      el.textContent = "BokehJS is loading...";
    }
    if (root.Bokeh !== undefined) {
      if (el != null) {
        el.textContent = "BokehJS " + root.Bokeh.version + " successfully loaded.";
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error(url) {
      console.error("failed to load " + url);
    }

    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  const js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-3.0.3.min.js"];
  const css_urls = [];

  const inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {
    }
  ];

  function run_inline_js() {
    if (root.Bokeh !== undefined || force === true) {
          for (let i = 0; i < inline_js.length; i++) {
      inline_js[i].call(root, root.Bokeh);
    }
if (force === true) {
        display_loaded();
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    } else if (force !== true) {
      const cell = $(document.getElementById("p3792")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }
  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));
</script>
</div>
<div class="cell-output cell-output-display">

  <div id="87c1cc94-aa47-4b9f-a217-86a298cbd47d" data-root-id="p3660" style="display: contents;"></div>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function embed_document(root) {
  const docs_json = {"7d1fadde-b212-4deb-a83e-736a2b9f82fd":{"version":"3.0.3","title":"Bokeh Application","defs":[],"roots":[{"type":"object","name":"Figure","id":"p3660","attributes":{"x_range":{"type":"object","name":"Range1d","id":"p3658","attributes":{"start":-10.1,"end":10.1}},"y_range":{"type":"object","name":"Range1d","id":"p3659","attributes":{"start":-10.1,"end":10.1}},"x_scale":{"type":"object","name":"LinearScale","id":"p3672"},"y_scale":{"type":"object","name":"LinearScale","id":"p3674"},"title":{"type":"object","name":"Title","id":"p3663","attributes":{"text":"Harry Potter Book 4 Network"}},"renderers":[{"type":"object","name":"GraphRenderer","id":"p3701","attributes":{"layout_provider":{"type":"object","name":"StaticLayoutProvider","id":"p3732","attributes":{"graph_layout":{"type":"map","entries":[[4,{"type":"ndarray","array":{"type":"bytes","data":"7DgyP8zOqj+MCHBTC932vw=="},"shape":[2],"dtype":"float64","order":"little"}],[13,{"type":"ndarray","array":{"type":"bytes","data":"M0lk66ATEcCzKkXqhO7wPw=="},"shape":[2],"dtype":"float64","order":"little"}],[5,{"type":"ndarray","array":{"type":"bytes","data":"pYAT+K/GDMDDImnRzHfhvw=="},"shape":[2],"dtype":"float64","order":"little"}],[22,{"type":"ndarray","array":{"type":"bytes","data":"QQfuzBlOE8BCTNfxWWn+vw=="},"shape":[2],"dtype":"float64","order":"little"}],[8,{"type":"ndarray","array":{"type":"bytes","data":"AUCLS4jX7D8/Z5I9hAr6Pw=="},"shape":[2],"dtype":"float64","order":"little"}],[14,{"type":"ndarray","array":{"type":"bytes","data":"jhf4TvzG9D/IOynfV7bSPw=="},"shape":[2],"dtype":"float64","order":"little"}],[11,{"type":"ndarray","array":{"type":"bytes","data":"WKnxMkeI4b+n68mgc0vfPw=="},"shape":[2],"dtype":"float64","order":"little"}],[18,{"type":"ndarray","array":{"type":"bytes","data":"VG/UIAAN9L8zaekwFojgvw=="},"shape":[2],"dtype":"float64","order":"little"}],[23,{"type":"ndarray","array":{"type":"bytes","data":"uv5nfmA+0T9/U9Ok7FPxPw=="},"shape":[2],"dtype":"float64","order":"little"}],[15,{"type":"ndarray","array":{"type":"bytes","data":"hZvOknSVBkBmEwc+AXgAwA=="},"shape":[2],"dtype":"float64","order":"little"}],[20,{"type":"ndarray","array":{"type":"bytes","data":"TdHiJxes8j9PalRUT7Lvvw=="},"shape":[2],"dtype":"float64","order":"little"}],[6,{"type":"ndarray","array":{"type":"bytes","data":"/KcsPuBnAkDbndy/T7n4Pw=="},"shape":[2],"dtype":"float64","order":"little"}],[0,{"type":"ndarray","array":{"type":"bytes","data":"qS68rogX+7/O776Dxd0GQA=="},"shape":[2],"dtype":"float64","order":"little"}],[3,{"type":"ndarray","array":{"type":"bytes","data":"Ep3lu1VV3z+20drIGggMQA=="},"shape":[2],"dtype":"float64","order":"little"}],[21,{"type":"ndarray","array":{"type":"bytes","data":"PQA6lcHq6T8AAAAAAAAkQA=="},"shape":[2],"dtype":"float64","order":"little"}],[17,{"type":"ndarray","array":{"type":"bytes","data":"8SHhClM/D0AZGawWAqYDQA=="},"shape":[2],"dtype":"float64","order":"little"}],[1,{"type":"ndarray","array":{"type":"bytes","data":"jHD89DKv9L/3Fw3KEf/7Pw=="},"shape":[2],"dtype":"float64","order":"little"}],[7,{"type":"ndarray","array":{"type":"bytes","data":"HOBtAXS1BMAQaGosr3rePw=="},"shape":[2],"dtype":"float64","order":"little"}],[10,{"type":"ndarray","array":{"type":"bytes","data":"Nq8mmtN9AEDo0RAAz2AQQA=="},"shape":[2],"dtype":"float64","order":"little"}],[12,{"type":"ndarray","array":{"type":"bytes","data":"q2e2nOhC87+u+qbBSE8EwA=="},"shape":[2],"dtype":"float64","order":"little"}],[19,{"type":"ndarray","array":{"type":"bytes","data":"1B09hdo/EEA5B3/HAOAbwA=="},"shape":[2],"dtype":"float64","order":"little"}],[2,{"type":"ndarray","array":{"type":"bytes","data":"sNw/VJN52z+apUQCl4IgwA=="},"shape":[2],"dtype":"float64","order":"little"}],[9,{"type":"ndarray","array":{"type":"bytes","data":"b03qNsivC0BTCWuBUfvZPw=="},"shape":[2],"dtype":"float64","order":"little"}],[16,{"type":"ndarray","array":{"type":"bytes","data":"HLNQ5vsTBsAPYi9i374ZwA=="},"shape":[2],"dtype":"float64","order":"little"}]]}}},"node_renderer":{"type":"object","name":"GlyphRenderer","id":"p3707","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p3704","attributes":{"selected":{"type":"object","name":"Selection","id":"p3706","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p3705"},"data":{"type":"map","entries":[["charname",["Harry","Dudley","Vernon","Petunia","Hermione","Dumbledore","Ron","George","Hagrid","Molly","Percy","Viktor","Dobby","Malfoy","Narcissa","Albus","Neville","Crabbe","Patil","Lupin","James","Lily","Fleur","Lockhart"]],["index",[4,13,5,22,8,14,11,18,23,15,20,6,0,3,21,17,1,7,10,12,19,2,9,16]]]}}},"view":{"type":"object","name":"CDSView","id":"p3708","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p3709"}}},"glyph":{"type":"object","name":"Circle","id":"p3733","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"fill_color":{"type":"field","field":"modularity_color"}}},"selection_glyph":{"type":"object","name":"Circle","id":"p3749","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":"white"}}},"hover_glyph":{"type":"object","name":"Circle","id":"p3741","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":"white"}}}}},"edge_renderer":{"type":"object","name":"GlyphRenderer","id":"p3715","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p3712","attributes":{"selected":{"type":"object","name":"Selection","id":"p3714","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p3713"},"data":{"type":"map","entries":[["Weight",[44,90,708,571,946,21,308,10,86,132,38,156,88,59,7,6,17,4,2,109,11,1,27,15,2,1,1,26,4,1,2,1,1,1,1,35,526,35,70,31,15,19,35,1,2,23,1,1,13,16,20,48,62,4,6,5,11,8,17,4,2,1,59,30,16,10,32,1,23,6,53,2,5,19,3,1,13,3,3,1,2,1,19,4,6,1,1,1,1,1,1,3,2,2,1,3,9,1,1,4,2,30,1,1,1,1,1]],["start",[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,13,13,13,13,13,5,5,5,5,5,5,22,22,8,8,8,8,8,8,8,8,8,8,8,8,8,8,14,14,14,14,14,14,14,14,14,14,14,14,14,11,11,11,11,11,11,11,11,11,11,11,11,18,18,18,18,18,18,18,18,23,23,23,23,23,23,23,23,23,15,20,20,20,6,6,6,6,0,3,3,3,3,3,1,12]],["end",[13,5,8,14,11,22,23,15,20,18,6,0,3,1,10,12,7,19,2,9,17,16,22,5,18,11,8,22,18,20,0,7,23,11,18,18,11,14,23,20,6,0,3,15,17,1,10,12,9,18,17,11,23,3,1,7,6,9,0,20,15,12,18,20,6,0,3,15,1,7,23,12,10,9,15,6,20,23,1,12,3,7,3,7,9,1,10,17,12,6,20,20,6,0,9,1,9,17,3,3,21,7,1,9,17,12,16]]]}}},"view":{"type":"object","name":"CDSView","id":"p3716","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p3717"}}},"glyph":{"type":"object","name":"MultiLine","id":"p3757","attributes":{"line_alpha":{"type":"value","value":0.3}}},"selection_glyph":{"type":"object","name":"MultiLine","id":"p3765","attributes":{"line_width":{"type":"value","value":2}}},"hover_glyph":{"type":"object","name":"MultiLine","id":"p3773","attributes":{"line_width":{"type":"value","value":2}}}}},"selection_policy":{"type":"object","name":"NodesAndLinkedEdges","id":"p3781"},"inspection_policy":{"type":"object","name":"NodesAndLinkedEdges","id":"p3783"}}},{"type":"object","name":"LabelSet","id":"p3788","attributes":{"source":{"type":"object","name":"ColumnDataSource","id":"p3785","attributes":{"selected":{"type":"object","name":"Selection","id":"p3787","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p3786"},"data":{"type":"map","entries":[["x",[0.052358992304208346,-4.26916854667279,-3.597015321822328,-4.826270296123597,0.901310107752579,1.2985804638605916,-0.5478855128288087,-1.2531739504256239,0.26943218559606985,2.822976252489243,1.1670142705962292,2.300720678079413,-1.6932455850209556,0.48958342885312434,0.8099067606526728,3.90592010974455,-1.2927732057351333,-2.5886001693397827,2.0614387553268,-1.2038351174910342,4.0623570269157945,0.429295379900803,3.4608310976270142,-2.759757804239042]],["y",[-1.4289658793718756,1.0582322264842048,-0.5458740320255732,-1.9007205435671186,1.6275675206329223,0.29237934868882265,0.4889802046015412,-0.5166121440227357,1.0829893530364811,-2.058596119490562,-0.9905163428368925,1.5452420706368375,2.8582868855137127,3.503957337549049,10.0,2.456058671118751,1.7497728245375563,0.4762380536791406,4.094539643313034,-2.5387129906733525,-6.968752972725093,-8.255058356170412,0.4059642566536656,-6.436399015562087]],["name",["Harry","Dudley","Vernon","Petunia","Hermione","Dumbledore","Ron","George","Hagrid","Molly","Percy","Viktor","Dobby","Malfoy","Narcissa","Albus","Neville","Crabbe","Patil","Lupin","James","Lily","Fleur","Lockhart"]]]}}},"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"text":{"type":"field","field":"name"},"text_font_size":{"type":"value","value":"10px"},"background_fill_color":{"type":"value","value":"white"},"background_fill_alpha":{"type":"value","value":0.7}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p3669","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p3690"},{"type":"object","name":"WheelZoomTool","id":"p3691"},{"type":"object","name":"SaveTool","id":"p3692"},{"type":"object","name":"ResetTool","id":"p3693"},{"type":"object","name":"HoverTool","id":"p3694","attributes":{"renderers":"auto","tooltips":[["Character","@index"],["Degree","@degree"],["Modularity Class","@modularity_class"],["Modularity Color","$color[swatch]:modularity_color"]]}}],"active_scroll":{"id":"p3691"}}},"left":[{"type":"object","name":"LinearAxis","id":"p3683","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p3684","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p3685"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p3686"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p3676","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p3677","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p3678"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p3679"}}}],"center":[{"type":"object","name":"Grid","id":"p3682","attributes":{"axis":{"id":"p3676"}}},{"type":"object","name":"Grid","id":"p3689","attributes":{"dimension":1,"axis":{"id":"p3683"}}}]}}]}};
  const render_items = [{"docid":"7d1fadde-b212-4deb-a83e-736a2b9f82fd","roots":{"p3660":"87c1cc94-aa47-4b9f-a217-86a298cbd47d"},"root_ids":["p3660"]}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_284/446730918.py:103: UserWarning: save() called but no resources were supplied and output_file(...) was never called, defaulting to resources.CDN
  save(plot, filename=f"{title}.html")
/tmp/ipykernel_284/446730918.py:103: UserWarning: save() called but no title was supplied and output_file(...) was never called, using default title 'Bokeh Plot'
  save(plot, filename=f"{title}.html")</code></pre>
</div>
</div>
<div class="cell" data-tags="[&quot;{&quot;,&quot;&quot;tags&quot;:&quot;,&quot;[&quot;,&quot;&quot;hide-input&quot;&quot;,&quot;]&quot;,&quot;}&quot;]" data-execution_count="17">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>plot_char_relations(book5_str, <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
        .bk-notebook-logo {
            display: block;
            width: 20px;
            height: 20px;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAOkSURBVDiNjZRtaJVlGMd/1/08zzln5zjP1LWcU9N0NkN8m2CYjpgQYQXqSs0I84OLIC0hkEKoPtiH3gmKoiJDU7QpLgoLjLIQCpEsNJ1vqUOdO7ppbuec5+V+rj4ctwzd8IIbbi6u+8f1539dt3A78eXC7QizUF7gyV1fD1Yqg4JWz84yffhm0qkFqBogB9rM8tZdtwVsPUhWhGcFJngGeWrPzHm5oaMmkfEg1usvLFyc8jLRqDOMru7AyC8saQr7GG7f5fvDeH7Ej8CM66nIF+8yngt6HWaKh7k49Soy9nXurCi1o3qUbS3zWfrYeQDTB/Qj6kX6Ybhw4B+bOYoLKCC9H3Nu/leUTZ1JdRWkkn2ldcCamzrcf47KKXdAJllSlxAOkRgyHsGC/zRday5Qld9DyoM4/q/rUoy/CXh3jzOu3bHUVZeU+DEn8FInkPBFlu3+nW3Nw0mk6vCDiWg8CeJaxEwuHS3+z5RgY+YBR6V1Z1nxSOfoaPa4LASWxxdNp+VWTk7+4vzaou8v8PN+xo+KY2xsw6une2frhw05CTYOmQvsEhjhWjn0bmXPjpE1+kplmmkP3suftwTubK9Vq22qKmrBhpY4jvd5afdRA3wGjFAgcnTK2s4hY0/GPNIb0nErGMCRxWOOX64Z8RAC4oCXdklmEvcL8o0BfkNK4lUg9HTl+oPlQxdNo3Mg4Nv175e/1LDGzZen30MEjRUtmXSfiTVu1kK8W4txyV6BMKlbgk3lMwYCiusNy9fVfvvwMxv8Ynl6vxoByANLTWplvuj/nF9m2+PDtt1eiHPBr1oIfhCChQMBw6Aw0UulqTKZdfVvfG7VcfIqLG9bcldL/+pdWTLxLUy8Qq38heUIjh4XlzZxzQm19lLFlr8vdQ97rjZVOLf8nclzckbcD4wxXMidpX30sFd37Fv/GtwwhzhxGVAprjbg0gCAEeIgwCZyTV2Z1REEW8O4py0wsjeloKoMr6iCY6dP92H6Vw/oTyICIthibxjm/DfN9lVz8IqtqKYLUXfoKVMVQVVJOElGjrnnUt9T9wbgp8AyYKaGlqingHZU/uG2NTZSVqwHQTWkx9hxjkpWDaCg6Ckj5qebgBVbT3V3NNXMSiWSDdGV3hrtzla7J+duwPOToIg42ChPQOQjspnSlp1V+Gjdged7+8UN5CRAV7a5EdFNwCjEaBR27b3W890TE7g24NAP/mMDXRWrGoFPQI9ls/MWO2dWFAar/xcOIImbbpA3zgAAAABJRU5ErkJggg==);
        }
    </style>
    <div>
        <a href="https://bokeh.org" target="_blank" class="bk-notebook-logo"></a>
        <span id="p4777">Loading BokehJS ...</span>
    </div>
</div>
<div class="cell-output cell-output-display">

<script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  const force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

const JS_MIME_TYPE = 'application/javascript';
  const HTML_MIME_TYPE = 'text/html';
  const EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';
  const CLASS_NAME = 'output_bokeh rendered_html';

  /**
   * Render data to the DOM node
   */
  function render(props, node) {
    const script = document.createElement("script");
    node.appendChild(script);
  }

  /**
   * Handle when an output is cleared or removed
   */
  function handleClearOutput(event, handle) {
    const cell = handle.cell;

    const id = cell.output_area._bokeh_element_id;
    const server_id = cell.output_area._bokeh_server_id;
    // Clean up Bokeh references
    if (id != null && id in Bokeh.index) {
      Bokeh.index[id].model.document.clear();
      delete Bokeh.index[id];
    }

    if (server_id !== undefined) {
      // Clean up Bokeh references
      const cmd_clean = "from bokeh.io.state import curstate; print(curstate().uuid_to_server['" + server_id + "'].get_sessions()[0].document.roots[0]._id)";
      cell.notebook.kernel.execute(cmd_clean, {
        iopub: {
          output: function(msg) {
            const id = msg.content.text.trim();
            if (id in Bokeh.index) {
              Bokeh.index[id].model.document.clear();
              delete Bokeh.index[id];
            }
          }
        }
      });
      // Destroy server and session
      const cmd_destroy = "import bokeh.io.notebook as ion; ion.destroy_server('" + server_id + "')";
      cell.notebook.kernel.execute(cmd_destroy);
    }
  }

  /**
   * Handle when a new output is added
   */
  function handleAddOutput(event, handle) {
    const output_area = handle.output_area;
    const output = handle.output;

    // limit handleAddOutput to display_data with EXEC_MIME_TYPE content only
    if ((output.output_type != "display_data") || (!Object.prototype.hasOwnProperty.call(output.data, EXEC_MIME_TYPE))) {
      return
    }

    const toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);

    if (output.metadata[EXEC_MIME_TYPE]["id"] !== undefined) {
      toinsert[toinsert.length - 1].firstChild.textContent = output.data[JS_MIME_TYPE];
      // store reference to embed id on output_area
      output_area._bokeh_element_id = output.metadata[EXEC_MIME_TYPE]["id"];
    }
    if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
      const bk_div = document.createElement("div");
      bk_div.innerHTML = output.data[HTML_MIME_TYPE];
      const script_attrs = bk_div.children[0].attributes;
      for (let i = 0; i < script_attrs.length; i++) {
        toinsert[toinsert.length - 1].firstChild.setAttribute(script_attrs[i].name, script_attrs[i].value);
        toinsert[toinsert.length - 1].firstChild.textContent = bk_div.children[0].textContent
      }
      // store reference to server id on output_area
      output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
    }
  }

  function register_renderer(events, OutputArea) {

    function append_mime(data, metadata, element) {
      // create a DOM node to render to
      const toinsert = this.create_output_subarea(
        metadata,
        CLASS_NAME,
        EXEC_MIME_TYPE
      );
      this.keyboard_manager.register_events(toinsert);
      // Render to node
      const props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
      render(props, toinsert[toinsert.length - 1]);
      element.append(toinsert);
      return toinsert
    }

    /* Handle when an output is cleared or removed */
    events.on('clear_output.CodeCell', handleClearOutput);
    events.on('delete.Cell', handleClearOutput);

    /* Handle when a new output is added */
    events.on('output_added.OutputArea', handleAddOutput);

    /**
     * Register the mime type and append_mime function with output_area
     */
    OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
      /* Is output safe? */
      safe: true,
      /* Index of renderer in `output_area.display_order` */
      index: 0
    });
  }

  // register the mime type if in Jupyter Notebook environment and previously unregistered
  if (root.Jupyter !== undefined) {
    const events = require('base/js/events');
    const OutputArea = require('notebook/js/outputarea').OutputArea;

    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  }
  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  const NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded() {
    const el = document.getElementById("p4777");
    if (el != null) {
      el.textContent = "BokehJS is loading...";
    }
    if (root.Bokeh !== undefined) {
      if (el != null) {
        el.textContent = "BokehJS " + root.Bokeh.version + " successfully loaded.";
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error(url) {
      console.error("failed to load " + url);
    }

    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  const js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-3.0.3.min.js"];
  const css_urls = [];

  const inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {
    }
  ];

  function run_inline_js() {
    if (root.Bokeh !== undefined || force === true) {
          for (let i = 0; i < inline_js.length; i++) {
      inline_js[i].call(root, root.Bokeh);
    }
if (force === true) {
        display_loaded();
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    } else if (force !== true) {
      const cell = $(document.getElementById("p4777")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }
  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));
</script>
</div>
<div class="cell-output cell-output-display">

  <div id="4939c7af-9e92-4e3d-a3ff-f29b31e9d81f" data-root-id="p4645" style="display: contents;"></div>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function embed_document(root) {
  const docs_json = {"681921fe-c270-40c8-8dc4-eeb5b8195cbd":{"version":"3.0.3","title":"Bokeh Application","defs":[],"roots":[{"type":"object","name":"Figure","id":"p4645","attributes":{"x_range":{"type":"object","name":"Range1d","id":"p4643","attributes":{"start":-10.1,"end":10.1}},"y_range":{"type":"object","name":"Range1d","id":"p4644","attributes":{"start":-10.1,"end":10.1}},"x_scale":{"type":"object","name":"LinearScale","id":"p4657"},"y_scale":{"type":"object","name":"LinearScale","id":"p4659"},"title":{"type":"object","name":"Title","id":"p4648","attributes":{"text":"Harry Potter Book 5 Network"}},"renderers":[{"type":"object","name":"GraphRenderer","id":"p4686","attributes":{"layout_provider":{"type":"object","name":"StaticLayoutProvider","id":"p4717","attributes":{"graph_layout":{"type":"map","entries":[[4,{"type":"ndarray","array":{"type":"bytes","data":"o5FPmuZA17+8zNVoCnOoPw=="},"shape":[2],"dtype":"float64","order":"little"}],[5,{"type":"ndarray","array":{"type":"bytes","data":"n+jV+7CGCMDjnVSCi/O+vw=="},"shape":[2],"dtype":"float64","order":"little"}],[24,{"type":"ndarray","array":{"type":"bytes","data":"WLLv3I/t8j+ZX11iRMAHwA=="},"shape":[2],"dtype":"float64","order":"little"}],[14,{"type":"ndarray","array":{"type":"bytes","data":"C+2ZUZGFBMBFfkVfUn78Pw=="},"shape":[2],"dtype":"float64","order":"little"}],[0,{"type":"ndarray","array":{"type":"bytes","data":"vE6j9h9A2D8b1Zf3sNYBwA=="},"shape":[2],"dtype":"float64","order":"little"}],[11,{"type":"ndarray","array":{"type":"bytes","data":"PgdZaGjh9T+ez9VL9nb3Pw=="},"shape":[2],"dtype":"float64","order":"little"}],[8,{"type":"ndarray","array":{"type":"bytes","data":"7GR92hDR/D8wKMgyP4XcPw=="},"shape":[2],"dtype":"float64","order":"little"}],[15,{"type":"ndarray","array":{"type":"bytes","data":"m/pumCJo4j9my7LT6SHvvw=="},"shape":[2],"dtype":"float64","order":"little"}],[19,{"type":"ndarray","array":{"type":"bytes","data":"Qh2tVg7LFECzhXnSt4PSvw=="},"shape":[2],"dtype":"float64","order":"little"}],[12,{"type":"ndarray","array":{"type":"bytes","data":"MCAOm/EA8L+ui3Wlvc31vw=="},"shape":[2],"dtype":"float64","order":"little"}],[1,{"type":"ndarray","array":{"type":"bytes","data":"ZsYrjOVWAsAb4/TGetcbwA=="},"shape":[2],"dtype":"float64","order":"little"}],[23,{"type":"ndarray","array":{"type":"bytes","data":"BHpSmddnCcBtlASdnyH+vw=="},"shape":[2],"dtype":"float64","order":"little"}],[20,{"type":"ndarray","array":{"type":"bytes","data":"uTfEet/a7791fLTk1Sf1Pw=="},"shape":[2],"dtype":"float64","order":"little"}],[9,{"type":"ndarray","array":{"type":"bytes","data":"YFpnYK++GMAmI6nBuU0RQA=="},"shape":[2],"dtype":"float64","order":"little"}],[22,{"type":"ndarray","array":{"type":"bytes","data":"ZZrINYpSCkAn2TeNrloEwA=="},"shape":[2],"dtype":"float64","order":"little"}],[16,{"type":"ndarray","array":{"type":"bytes","data":"+N13+inPzj/uKiRtku8MwA=="},"shape":[2],"dtype":"float64","order":"little"}],[21,{"type":"ndarray","array":{"type":"bytes","data":"uTtZntGC8T+D4zXwivkVwA=="},"shape":[2],"dtype":"float64","order":"little"}],[26,{"type":"ndarray","array":{"type":"bytes","data":"n5lXAFu1CUDuMZ9Gu4XXPw=="},"shape":[2],"dtype":"float64","order":"little"}],[18,{"type":"ndarray","array":{"type":"bytes","data":"hZchGPEE9b9098ZBixATQA=="},"shape":[2],"dtype":"float64","order":"little"}],[25,{"type":"ndarray","array":{"type":"bytes","data":"nhpqnRDJF8Alxn5KYYb5vw=="},"shape":[2],"dtype":"float64","order":"little"}],[17,{"type":"ndarray","array":{"type":"bytes","data":"AAAAAAAAJMAAwPrsdBYQwA=="},"shape":[2],"dtype":"float64","order":"little"}],[3,{"type":"ndarray","array":{"type":"bytes","data":"njLSzH85qL9PSBYGXgL1Pw=="},"shape":[2],"dtype":"float64","order":"little"}],[2,{"type":"ndarray","array":{"type":"bytes","data":"WI8HrX6jAECllXfbJtwJQA=="},"shape":[2],"dtype":"float64","order":"little"}],[13,{"type":"ndarray","array":{"type":"bytes","data":"gFBpVDP0DEBhPlF+5RIBQA=="},"shape":[2],"dtype":"float64","order":"little"}],[10,{"type":"ndarray","array":{"type":"bytes","data":"5/jppfP1EEAzmrrrtgwUQA=="},"shape":[2],"dtype":"float64","order":"little"}],[6,{"type":"ndarray","array":{"type":"bytes","data":"Ucnbceoq5T8xUN3i5LASQA=="},"shape":[2],"dtype":"float64","order":"little"}],[7,{"type":"ndarray","array":{"type":"bytes","data":"uGceQhoEIEDHF8vs4GEJQA=="},"shape":[2],"dtype":"float64","order":"little"}]]}}},"node_renderer":{"type":"object","name":"GlyphRenderer","id":"p4692","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p4689","attributes":{"selected":{"type":"object","name":"Selection","id":"p4691","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p4690"},"data":{"type":"map","entries":[["charname",["Harry","Vernon","Petunia","Dudley","Dobby","Ron","Hermione","Dumbledore","Albus","Lupin","Lily","Tonks","George","Fleur","Percy","Molly","James","Hagrid","Lockhart","Narcissa","Ted","Malfoy","Neville","Luna","Patil","Crabbe","Viktor"]],["index",[4,5,24,14,0,11,8,15,19,12,1,23,20,9,22,16,21,26,18,25,17,3,2,13,10,6,7]]]}}},"view":{"type":"object","name":"CDSView","id":"p4693","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p4694"}}},"glyph":{"type":"object","name":"Circle","id":"p4718","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"fill_color":{"type":"field","field":"modularity_color"}}},"selection_glyph":{"type":"object","name":"Circle","id":"p4734","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":"white"}}},"hover_glyph":{"type":"object","name":"Circle","id":"p4726","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":"white"}}}}},"edge_renderer":{"type":"object","name":"GlyphRenderer","id":"p4700","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p4697","attributes":{"selected":{"type":"object","name":"Selection","id":"p4699","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p4698"},"data":{"type":"map","entries":[["Weight",[113,50,124,72,1098,1089,595,5,178,5,114,228,1,44,31,330,13,4,46,196,245,120,23,7,50,25,2,3,4,1,1,1,3,18,1,3,7,1,1,1,1,9,3,2,1,1,1,1,614,79,100,24,4,6,76,33,3,50,5,36,7,1,6,76,84,7,12,8,2,7,31,55,60,8,181,2,1,3,1,16,19,12,11,6,8,14,41,3,11,1,2,1,2,1,1,29,10,8,1,17,7,2,2,1,1,16,5,4,1,3,1,7,5,13,2,2,3,1,1,1,1,2,1,4,20,2,3,1,1,1,28,13,3,26,5,4,1]],["start",[4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,24,24,24,14,14,14,14,14,14,0,0,0,0,0,0,0,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,15,15,15,15,15,15,15,15,15,15,15,15,19,19,19,19,12,12,12,12,12,12,12,12,12,12,1,23,23,23,23,20,20,20,20,20,20,20,20,22,22,22,16,16,26,26,26,26,18,25,25,3,3,3,2,2,2,13]],["end",[5,24,14,0,11,8,15,19,12,1,23,20,9,22,16,26,18,25,21,3,2,13,6,10,24,14,11,8,15,12,3,23,11,14,23,11,15,12,23,6,8,8,15,11,26,13,12,20,8,15,20,22,16,12,26,3,23,2,10,13,6,7,18,15,20,22,12,23,16,10,3,13,2,6,26,19,7,18,21,19,12,20,22,16,23,3,26,13,2,21,25,22,26,3,2,23,16,20,22,21,2,26,3,18,1,21,20,16,17,3,9,22,16,3,2,6,26,13,16,21,26,21,3,13,3,6,2,2,17,3,6,2,13,13,6,10,10]]]}}},"view":{"type":"object","name":"CDSView","id":"p4701","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p4702"}}},"glyph":{"type":"object","name":"MultiLine","id":"p4742","attributes":{"line_alpha":{"type":"value","value":0.3}}},"selection_glyph":{"type":"object","name":"MultiLine","id":"p4750","attributes":{"line_width":{"type":"value","value":2}}},"hover_glyph":{"type":"object","name":"MultiLine","id":"p4758","attributes":{"line_width":{"type":"value","value":2}}}}},"selection_policy":{"type":"object","name":"NodesAndLinkedEdges","id":"p4766"},"inspection_policy":{"type":"object","name":"NodesAndLinkedEdges","id":"p4768"}}},{"type":"object","name":"LabelSet","id":"p4773","attributes":{"source":{"type":"object","name":"ColumnDataSource","id":"p4770","attributes":{"selected":{"type":"object","name":"Selection","id":"p4772","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p4771"},"data":{"type":"map","entries":[["x",[-0.3633362299863398,-3.0657672571806667,1.1829985266041572,-2.565218579778621,0.37891387067541493,1.3675312114796294,1.8010414633520737,0.5752118088929196,5.198296884838159,-1.0002304131358066,-2.2924300146922176,-3.1757041910452717,-0.9954678914816589,-6.186215883548897,3.2903026773304185,0.24069714288610533,1.0944381890765114,3.213552477525084,-1.3137064879060472,-5.9463524433146215,-10.0,-0.047313684227537,2.0798314588482008,3.6192385286940976,4.240187256246123,0.6614887450980779,8.008012834750716]],["y",[0.047752690598735964,-0.12090370113275344,-2.968880432581454,1.7808402749577834,-2.229829725571688,1.466543480139968,0.445632743446029,-0.9728898176893892,-0.28928943208856167,-1.362729688954214,-6.96042929525063,-1.8832088597785301,1.3222254689970019,4.325903917263338,-2.5442782433193716,-3.616978504816294,-5.493694070138079,0.3675373258272704,4.766156223076781,-1.595307627674978,-4.021930411152425,1.3130779493117364,3.232495989405566,2.134226786474571,5.01241653753691,4.672748131521119,3.1727922915915516]],["name",["Harry","Vernon","Petunia","Dudley","Dobby","Ron","Hermione","Dumbledore","Albus","Lupin","Lily","Tonks","George","Fleur","Percy","Molly","James","Hagrid","Lockhart","Narcissa","Ted","Malfoy","Neville","Luna","Patil","Crabbe","Viktor"]]]}}},"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"text":{"type":"field","field":"name"},"text_font_size":{"type":"value","value":"10px"},"background_fill_color":{"type":"value","value":"white"},"background_fill_alpha":{"type":"value","value":0.7}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p4654","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p4675"},{"type":"object","name":"WheelZoomTool","id":"p4676"},{"type":"object","name":"SaveTool","id":"p4677"},{"type":"object","name":"ResetTool","id":"p4678"},{"type":"object","name":"HoverTool","id":"p4679","attributes":{"renderers":"auto","tooltips":[["Character","@index"],["Degree","@degree"],["Modularity Class","@modularity_class"],["Modularity Color","$color[swatch]:modularity_color"]]}}],"active_scroll":{"id":"p4676"}}},"left":[{"type":"object","name":"LinearAxis","id":"p4668","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p4669","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p4670"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p4671"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p4661","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p4662","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p4663"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p4664"}}}],"center":[{"type":"object","name":"Grid","id":"p4667","attributes":{"axis":{"id":"p4661"}}},{"type":"object","name":"Grid","id":"p4674","attributes":{"dimension":1,"axis":{"id":"p4668"}}}]}}]}};
  const render_items = [{"docid":"681921fe-c270-40c8-8dc4-eeb5b8195cbd","roots":{"p4645":"4939c7af-9e92-4e3d-a3ff-f29b31e9d81f"},"root_ids":["p4645"]}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_284/446730918.py:103: UserWarning: save() called but no resources were supplied and output_file(...) was never called, defaulting to resources.CDN
  save(plot, filename=f"{title}.html")
/tmp/ipykernel_284/446730918.py:103: UserWarning: save() called but no title was supplied and output_file(...) was never called, using default title 'Bokeh Plot'
  save(plot, filename=f"{title}.html")</code></pre>
</div>
</div>
<div class="cell" data-tags="[&quot;{&quot;,&quot;&quot;tags&quot;:&quot;,&quot;[&quot;,&quot;&quot;hide-input&quot;&quot;,&quot;]&quot;,&quot;}&quot;]" data-execution_count="18">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>plot_char_relations(book6_str, <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
        .bk-notebook-logo {
            display: block;
            width: 20px;
            height: 20px;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAOkSURBVDiNjZRtaJVlGMd/1/08zzln5zjP1LWcU9N0NkN8m2CYjpgQYQXqSs0I84OLIC0hkEKoPtiH3gmKoiJDU7QpLgoLjLIQCpEsNJ1vqUOdO7ppbuec5+V+rj4ctwzd8IIbbi6u+8f1539dt3A78eXC7QizUF7gyV1fD1Yqg4JWz84yffhm0qkFqBogB9rM8tZdtwVsPUhWhGcFJngGeWrPzHm5oaMmkfEg1usvLFyc8jLRqDOMru7AyC8saQr7GG7f5fvDeH7Ej8CM66nIF+8yngt6HWaKh7k49Soy9nXurCi1o3qUbS3zWfrYeQDTB/Qj6kX6Ybhw4B+bOYoLKCC9H3Nu/leUTZ1JdRWkkn2ldcCamzrcf47KKXdAJllSlxAOkRgyHsGC/zRday5Qld9DyoM4/q/rUoy/CXh3jzOu3bHUVZeU+DEn8FInkPBFlu3+nW3Nw0mk6vCDiWg8CeJaxEwuHS3+z5RgY+YBR6V1Z1nxSOfoaPa4LASWxxdNp+VWTk7+4vzaou8v8PN+xo+KY2xsw6une2frhw05CTYOmQvsEhjhWjn0bmXPjpE1+kplmmkP3suftwTubK9Vq22qKmrBhpY4jvd5afdRA3wGjFAgcnTK2s4hY0/GPNIb0nErGMCRxWOOX64Z8RAC4oCXdklmEvcL8o0BfkNK4lUg9HTl+oPlQxdNo3Mg4Nv175e/1LDGzZen30MEjRUtmXSfiTVu1kK8W4txyV6BMKlbgk3lMwYCiusNy9fVfvvwMxv8Ynl6vxoByANLTWplvuj/nF9m2+PDtt1eiHPBr1oIfhCChQMBw6Aw0UulqTKZdfVvfG7VcfIqLG9bcldL/+pdWTLxLUy8Qq38heUIjh4XlzZxzQm19lLFlr8vdQ97rjZVOLf8nclzckbcD4wxXMidpX30sFd37Fv/GtwwhzhxGVAprjbg0gCAEeIgwCZyTV2Z1REEW8O4py0wsjeloKoMr6iCY6dP92H6Vw/oTyICIthibxjm/DfN9lVz8IqtqKYLUXfoKVMVQVVJOElGjrnnUt9T9wbgp8AyYKaGlqingHZU/uG2NTZSVqwHQTWkx9hxjkpWDaCg6Ckj5qebgBVbT3V3NNXMSiWSDdGV3hrtzla7J+duwPOToIg42ChPQOQjspnSlp1V+Gjdged7+8UN5CRAV7a5EdFNwCjEaBR27b3W890TE7g24NAP/mMDXRWrGoFPQI9ls/MWO2dWFAar/xcOIImbbpA3zgAAAABJRU5ErkJggg==);
        }
    </style>
    <div>
        <a href="https://bokeh.org" target="_blank" class="bk-notebook-logo"></a>
        <span id="p5801">Loading BokehJS ...</span>
    </div>
</div>
<div class="cell-output cell-output-display">

<script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  const force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

const JS_MIME_TYPE = 'application/javascript';
  const HTML_MIME_TYPE = 'text/html';
  const EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';
  const CLASS_NAME = 'output_bokeh rendered_html';

  /**
   * Render data to the DOM node
   */
  function render(props, node) {
    const script = document.createElement("script");
    node.appendChild(script);
  }

  /**
   * Handle when an output is cleared or removed
   */
  function handleClearOutput(event, handle) {
    const cell = handle.cell;

    const id = cell.output_area._bokeh_element_id;
    const server_id = cell.output_area._bokeh_server_id;
    // Clean up Bokeh references
    if (id != null && id in Bokeh.index) {
      Bokeh.index[id].model.document.clear();
      delete Bokeh.index[id];
    }

    if (server_id !== undefined) {
      // Clean up Bokeh references
      const cmd_clean = "from bokeh.io.state import curstate; print(curstate().uuid_to_server['" + server_id + "'].get_sessions()[0].document.roots[0]._id)";
      cell.notebook.kernel.execute(cmd_clean, {
        iopub: {
          output: function(msg) {
            const id = msg.content.text.trim();
            if (id in Bokeh.index) {
              Bokeh.index[id].model.document.clear();
              delete Bokeh.index[id];
            }
          }
        }
      });
      // Destroy server and session
      const cmd_destroy = "import bokeh.io.notebook as ion; ion.destroy_server('" + server_id + "')";
      cell.notebook.kernel.execute(cmd_destroy);
    }
  }

  /**
   * Handle when a new output is added
   */
  function handleAddOutput(event, handle) {
    const output_area = handle.output_area;
    const output = handle.output;

    // limit handleAddOutput to display_data with EXEC_MIME_TYPE content only
    if ((output.output_type != "display_data") || (!Object.prototype.hasOwnProperty.call(output.data, EXEC_MIME_TYPE))) {
      return
    }

    const toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);

    if (output.metadata[EXEC_MIME_TYPE]["id"] !== undefined) {
      toinsert[toinsert.length - 1].firstChild.textContent = output.data[JS_MIME_TYPE];
      // store reference to embed id on output_area
      output_area._bokeh_element_id = output.metadata[EXEC_MIME_TYPE]["id"];
    }
    if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
      const bk_div = document.createElement("div");
      bk_div.innerHTML = output.data[HTML_MIME_TYPE];
      const script_attrs = bk_div.children[0].attributes;
      for (let i = 0; i < script_attrs.length; i++) {
        toinsert[toinsert.length - 1].firstChild.setAttribute(script_attrs[i].name, script_attrs[i].value);
        toinsert[toinsert.length - 1].firstChild.textContent = bk_div.children[0].textContent
      }
      // store reference to server id on output_area
      output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
    }
  }

  function register_renderer(events, OutputArea) {

    function append_mime(data, metadata, element) {
      // create a DOM node to render to
      const toinsert = this.create_output_subarea(
        metadata,
        CLASS_NAME,
        EXEC_MIME_TYPE
      );
      this.keyboard_manager.register_events(toinsert);
      // Render to node
      const props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
      render(props, toinsert[toinsert.length - 1]);
      element.append(toinsert);
      return toinsert
    }

    /* Handle when an output is cleared or removed */
    events.on('clear_output.CodeCell', handleClearOutput);
    events.on('delete.Cell', handleClearOutput);

    /* Handle when a new output is added */
    events.on('output_added.OutputArea', handleAddOutput);

    /**
     * Register the mime type and append_mime function with output_area
     */
    OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
      /* Is output safe? */
      safe: true,
      /* Index of renderer in `output_area.display_order` */
      index: 0
    });
  }

  // register the mime type if in Jupyter Notebook environment and previously unregistered
  if (root.Jupyter !== undefined) {
    const events = require('base/js/events');
    const OutputArea = require('notebook/js/outputarea').OutputArea;

    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  }
  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  const NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded() {
    const el = document.getElementById("p5801");
    if (el != null) {
      el.textContent = "BokehJS is loading...";
    }
    if (root.Bokeh !== undefined) {
      if (el != null) {
        el.textContent = "BokehJS " + root.Bokeh.version + " successfully loaded.";
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error(url) {
      console.error("failed to load " + url);
    }

    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  const js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-3.0.3.min.js"];
  const css_urls = [];

  const inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {
    }
  ];

  function run_inline_js() {
    if (root.Bokeh !== undefined || force === true) {
          for (let i = 0; i < inline_js.length; i++) {
      inline_js[i].call(root, root.Bokeh);
    }
if (force === true) {
        display_loaded();
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    } else if (force !== true) {
      const cell = $(document.getElementById("p5801")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }
  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));
</script>
</div>
<div class="cell-output cell-output-display">

  <div id="bbaf4b56-78a9-4bfd-a22c-393929073bc9" data-root-id="p5669" style="display: contents;"></div>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function embed_document(root) {
  const docs_json = {"9591fc1c-4de0-44d4-8142-a9d2beeb7716":{"version":"3.0.3","title":"Bokeh Application","defs":[],"roots":[{"type":"object","name":"Figure","id":"p5669","attributes":{"x_range":{"type":"object","name":"Range1d","id":"p5667","attributes":{"start":-10.1,"end":10.1}},"y_range":{"type":"object","name":"Range1d","id":"p5668","attributes":{"start":-10.1,"end":10.1}},"x_scale":{"type":"object","name":"LinearScale","id":"p5681"},"y_scale":{"type":"object","name":"LinearScale","id":"p5683"},"title":{"type":"object","name":"Title","id":"p5672","attributes":{"text":"Harry Potter Book 6 Network"}},"renderers":[{"type":"object","name":"GraphRenderer","id":"p5710","attributes":{"layout_provider":{"type":"object","name":"StaticLayoutProvider","id":"p5741","attributes":{"graph_layout":{"type":"map","entries":[[5,{"type":"ndarray","array":{"type":"bytes","data":"DJa0LA2G7T8Ut4HhGcfYPw=="},"shape":[2],"dtype":"float64","order":"little"}],[16,{"type":"ndarray","array":{"type":"bytes","data":"1j29qKVT+D8mN8Q//JcBwA=="},"shape":[2],"dtype":"float64","order":"little"}],[22,{"type":"ndarray","array":{"type":"bytes","data":"I1CpIkv/EMDLwaAu440XwA=="},"shape":[2],"dtype":"float64","order":"little"}],[19,{"type":"ndarray","array":{"type":"bytes","data":"i4zkKYDr+L+SsNU3qFYfwA=="},"shape":[2],"dtype":"float64","order":"little"}],[2,{"type":"ndarray","array":{"type":"bytes","data":"Rj53p1Zhyj/j0pkC/Y3xvw=="},"shape":[2],"dtype":"float64","order":"little"}],[6,{"type":"ndarray","array":{"type":"bytes","data":"hY9fttEaHUArWmUn7LwSwA=="},"shape":[2],"dtype":"float64","order":"little"}],[24,{"type":"ndarray","array":{"type":"bytes","data":"YzsA7IGtI0BIi/tqK2/ovw=="},"shape":[2],"dtype":"float64","order":"little"}],[15,{"type":"ndarray","array":{"type":"bytes","data":"AAAAAAAAJEDGWnjEwZcNwA=="},"shape":[2],"dtype":"float64","order":"little"}],[26,{"type":"ndarray","array":{"type":"bytes","data":"uZarK6pcE8AHWYqWyBkAQA=="},"shape":[2],"dtype":"float64","order":"little"}],[9,{"type":"ndarray","array":{"type":"bytes","data":"d8TzpMoTAMDxZgJUSM4AQA=="},"shape":[2],"dtype":"float64","order":"little"}],[0,{"type":"ndarray","array":{"type":"bytes","data":"RkOH2cYKaz/KvMVhccENwA=="},"shape":[2],"dtype":"float64","order":"little"}],[3,{"type":"ndarray","array":{"type":"bytes","data":"d0twh8m4A0AYf0plzzgiwA=="},"shape":[2],"dtype":"float64","order":"little"}],[12,{"type":"ndarray","array":{"type":"bytes","data":"u244mlTR8b+ulFlRszEJQA=="},"shape":[2],"dtype":"float64","order":"little"}],[17,{"type":"ndarray","array":{"type":"bytes","data":"W3e+pbe4H8Ae0sDw/F7xPw=="},"shape":[2],"dtype":"float64","order":"little"}],[23,{"type":"ndarray","array":{"type":"bytes","data":"PHSDcelqDMBjkLYvUznvvw=="},"shape":[2],"dtype":"float64","order":"little"}],[20,{"type":"ndarray","array":{"type":"bytes","data":"lOQ8uCrLG8A+8sY5Wa6RPw=="},"shape":[2],"dtype":"float64","order":"little"}],[10,{"type":"ndarray","array":{"type":"bytes","data":"v/mcA58sFsAXnuXWm0vsvw=="},"shape":[2],"dtype":"float64","order":"little"}],[13,{"type":"ndarray","array":{"type":"bytes","data":"ZVNBoRbTCMAsbQ6y6iALwA=="},"shape":[2],"dtype":"float64","order":"little"}],[25,{"type":"ndarray","array":{"type":"bytes","data":"LC7FKj1mGcBfK040oEQVQA=="},"shape":[2],"dtype":"float64","order":"little"}],[4,{"type":"ndarray","array":{"type":"bytes","data":"QLCsbg0BAcDdNOsq9xW/vw=="},"shape":[2],"dtype":"float64","order":"little"}],[21,{"type":"ndarray","array":{"type":"bytes","data":"IWb2F36PCUDEa1UNoZ8cwA=="},"shape":[2],"dtype":"float64","order":"little"}],[14,{"type":"ndarray","array":{"type":"bytes","data":"kYNLmIvyCUDL/XeNFbXqPw=="},"shape":[2],"dtype":"float64","order":"little"}],[7,{"type":"ndarray","array":{"type":"bytes","data":"/kjmkFmV8r8eLpsZpEsZQA=="},"shape":[2],"dtype":"float64","order":"little"}],[11,{"type":"ndarray","array":{"type":"bytes","data":"4zFjmPMsEUDEcHrGALQPQA=="},"shape":[2],"dtype":"float64","order":"little"}],[8,{"type":"ndarray","array":{"type":"bytes","data":"99cxM90W/D+slLVE8g4iQA=="},"shape":[2],"dtype":"float64","order":"little"}],[1,{"type":"ndarray","array":{"type":"bytes","data":"y4bUIt20CsDjWxnOqg8gQA=="},"shape":[2],"dtype":"float64","order":"little"}],[18,{"type":"ndarray","array":{"type":"bytes","data":"wEOlc4w0IkCYfLUBnowiQA=="},"shape":[2],"dtype":"float64","order":"little"}]]}}},"node_renderer":{"type":"object","name":"GlyphRenderer","id":"p5716","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p5713","attributes":{"selected":{"type":"object","name":"Selection","id":"p5715","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p5714"},"data":{"type":"map","entries":[["charname",["Harry","Dumbledore","Narcissa","Albus","Neville","Vernon","Petunia","Dudley","Hagrid","Hermione","Slughorn","Lily","Ron","Molly","Tonks","George","Fleur","Lupin","Percy","Malfoy","James","Luna","Crabbe","Patil","Viktor","Dobby","Lockhart"]],["index",[5,16,22,19,2,6,24,15,26,9,0,3,12,17,23,20,10,13,25,4,21,14,7,11,8,1,18]]]}}},"view":{"type":"object","name":"CDSView","id":"p5717","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p5718"}}},"glyph":{"type":"object","name":"Circle","id":"p5742","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"fill_color":{"type":"field","field":"modularity_color"}}},"selection_glyph":{"type":"object","name":"Circle","id":"p5758","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":"white"}}},"hover_glyph":{"type":"object","name":"Circle","id":"p5750","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":"white"}}}}},"edge_renderer":{"type":"object","name":"GlyphRenderer","id":"p5724","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p5721","attributes":{"selected":{"type":"object","name":"Selection","id":"p5723","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p5722"},"data":{"type":"map","entries":[["Weight",[1059,5,7,63,20,5,174,1,553,332,10,771,11,48,36,29,14,325,11,55,60,18,5,1,36,2,7,21,3,22,7,2,39,86,42,46,3,11,82,1,10,2,4,1,1,6,1,2,1,10,1,11,14,7,1,1,6,1,1,1,5,4,1,4,4,49,4,1,2,32,51,1,1,405,58,6,5,7,15,45,4,4,1,7,5,1,1,65,1,37,3,5,2,14,8,40,5,9,48,5,1,2,10,2,2,2,1,1,10,2,18,1,6,2,2,8,2,2,1,1,29,2,9]],["start",[5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,22,22,22,19,19,2,2,2,2,2,2,2,2,2,2,2,6,6,6,24,26,26,26,26,26,26,26,26,26,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,0,0,3,12,12,12,12,12,12,12,12,12,12,12,17,17,17,17,23,23,23,23,20,20,20,10,10,13,13,25,4,4,4]],["end",[16,22,19,2,6,24,26,15,9,0,3,12,17,23,20,10,25,4,21,13,14,7,11,8,1,18,22,19,2,6,15,24,26,0,12,9,17,23,4,14,13,21,10,11,19,4,9,0,4,14,3,12,0,9,11,7,4,23,13,10,24,15,0,15,17,9,20,10,23,12,0,4,25,12,0,10,23,13,20,4,7,11,8,14,1,25,3,12,21,4,20,14,21,10,23,20,25,13,4,7,11,8,14,1,23,20,10,13,10,4,13,14,10,4,25,13,25,21,4,7,7,14,1]]]}}},"view":{"type":"object","name":"CDSView","id":"p5725","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p5726"}}},"glyph":{"type":"object","name":"MultiLine","id":"p5766","attributes":{"line_alpha":{"type":"value","value":0.3}}},"selection_glyph":{"type":"object","name":"MultiLine","id":"p5774","attributes":{"line_width":{"type":"value","value":2}}},"hover_glyph":{"type":"object","name":"MultiLine","id":"p5782","attributes":{"line_width":{"type":"value","value":2}}}}},"selection_policy":{"type":"object","name":"NodesAndLinkedEdges","id":"p5790"},"inspection_policy":{"type":"object","name":"NodesAndLinkedEdges","id":"p5792"}}},{"type":"object","name":"LabelSet","id":"p5797","attributes":{"source":{"type":"object","name":"ColumnDataSource","id":"p5794","attributes":{"selected":{"type":"object","name":"Selection","id":"p5796","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p5795"},"data":{"type":"map","entries":[["x",[0.9226137040283802,1.5204216567398041,-4.249310056289718,-1.5574952732502279,0.20609553505936357,7.276190614302213,9.83888185026962,10.0,-4.840492899272868,-2.0096638571636123,0.003301037195548781,2.4652281361717843,-1.1136060737834856,-7.9303880593778,-3.552203070472869,-6.948405150143248,-5.543575340705899,-3.103070506864628,-6.349842708859381,-2.1255139013719884,3.195064723212241,3.2434303186459563,-1.1614623699320528,4.29389799218595,1.755582046489051,-3.338312408552928,9.102634061740787]],["y",[0.3871521665777078,-2.1992115957026668,-5.888561943590001,-7.83462607614287,-1.097165117416062,-4.68449460559945,-0.7635705079559125,-3.699100050852709,2.012589622590102,2.1007238925202434,-3.719454540106743,-9.11095730337506,3.1492678027594456,1.0856904415533175,-0.9757476741692809,0.017266649390636817,-0.8842295834737709,-3.3910726462032894,5.317017380972941,-0.12142891691037812,-7.155887802447015,0.8346050036488405,6.323868179413266,3.9628921037784455,9.029192111173266,8.030600014300893,9.274642995266092]],["name",["Harry","Dumbledore","Narcissa","Albus","Neville","Vernon","Petunia","Dudley","Hagrid","Hermione","Slughorn","Lily","Ron","Molly","Tonks","George","Fleur","Lupin","Percy","Malfoy","James","Luna","Crabbe","Patil","Viktor","Dobby","Lockhart"]]]}}},"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"text":{"type":"field","field":"name"},"text_font_size":{"type":"value","value":"10px"},"background_fill_color":{"type":"value","value":"white"},"background_fill_alpha":{"type":"value","value":0.7}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p5678","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p5699"},{"type":"object","name":"WheelZoomTool","id":"p5700"},{"type":"object","name":"SaveTool","id":"p5701"},{"type":"object","name":"ResetTool","id":"p5702"},{"type":"object","name":"HoverTool","id":"p5703","attributes":{"renderers":"auto","tooltips":[["Character","@index"],["Degree","@degree"],["Modularity Class","@modularity_class"],["Modularity Color","$color[swatch]:modularity_color"]]}}],"active_scroll":{"id":"p5700"}}},"left":[{"type":"object","name":"LinearAxis","id":"p5692","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p5693","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p5694"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p5695"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p5685","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p5686","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p5687"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p5688"}}}],"center":[{"type":"object","name":"Grid","id":"p5691","attributes":{"axis":{"id":"p5685"}}},{"type":"object","name":"Grid","id":"p5698","attributes":{"dimension":1,"axis":{"id":"p5692"}}}]}}]}};
  const render_items = [{"docid":"9591fc1c-4de0-44d4-8142-a9d2beeb7716","roots":{"p5669":"bbaf4b56-78a9-4bfd-a22c-393929073bc9"},"root_ids":["p5669"]}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_284/446730918.py:103: UserWarning: save() called but no resources were supplied and output_file(...) was never called, defaulting to resources.CDN
  save(plot, filename=f"{title}.html")
/tmp/ipykernel_284/446730918.py:103: UserWarning: save() called but no title was supplied and output_file(...) was never called, using default title 'Bokeh Plot'
  save(plot, filename=f"{title}.html")</code></pre>
</div>
</div>
<div class="cell" data-tags="[&quot;{&quot;,&quot;&quot;tags&quot;:&quot;,&quot;[&quot;,&quot;&quot;hide-input&quot;&quot;,&quot;]&quot;,&quot;}&quot;]" data-execution_count="19">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>plot_char_relations(book7_str, <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<style>
        .bk-notebook-logo {
            display: block;
            width: 20px;
            height: 20px;
            background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAOkSURBVDiNjZRtaJVlGMd/1/08zzln5zjP1LWcU9N0NkN8m2CYjpgQYQXqSs0I84OLIC0hkEKoPtiH3gmKoiJDU7QpLgoLjLIQCpEsNJ1vqUOdO7ppbuec5+V+rj4ctwzd8IIbbi6u+8f1539dt3A78eXC7QizUF7gyV1fD1Yqg4JWz84yffhm0qkFqBogB9rM8tZdtwVsPUhWhGcFJngGeWrPzHm5oaMmkfEg1usvLFyc8jLRqDOMru7AyC8saQr7GG7f5fvDeH7Ej8CM66nIF+8yngt6HWaKh7k49Soy9nXurCi1o3qUbS3zWfrYeQDTB/Qj6kX6Ybhw4B+bOYoLKCC9H3Nu/leUTZ1JdRWkkn2ldcCamzrcf47KKXdAJllSlxAOkRgyHsGC/zRday5Qld9DyoM4/q/rUoy/CXh3jzOu3bHUVZeU+DEn8FInkPBFlu3+nW3Nw0mk6vCDiWg8CeJaxEwuHS3+z5RgY+YBR6V1Z1nxSOfoaPa4LASWxxdNp+VWTk7+4vzaou8v8PN+xo+KY2xsw6une2frhw05CTYOmQvsEhjhWjn0bmXPjpE1+kplmmkP3suftwTubK9Vq22qKmrBhpY4jvd5afdRA3wGjFAgcnTK2s4hY0/GPNIb0nErGMCRxWOOX64Z8RAC4oCXdklmEvcL8o0BfkNK4lUg9HTl+oPlQxdNo3Mg4Nv175e/1LDGzZen30MEjRUtmXSfiTVu1kK8W4txyV6BMKlbgk3lMwYCiusNy9fVfvvwMxv8Ynl6vxoByANLTWplvuj/nF9m2+PDtt1eiHPBr1oIfhCChQMBw6Aw0UulqTKZdfVvfG7VcfIqLG9bcldL/+pdWTLxLUy8Qq38heUIjh4XlzZxzQm19lLFlr8vdQ97rjZVOLf8nclzckbcD4wxXMidpX30sFd37Fv/GtwwhzhxGVAprjbg0gCAEeIgwCZyTV2Z1REEW8O4py0wsjeloKoMr6iCY6dP92H6Vw/oTyICIthibxjm/DfN9lVz8IqtqKYLUXfoKVMVQVVJOElGjrnnUt9T9wbgp8AyYKaGlqingHZU/uG2NTZSVqwHQTWkx9hxjkpWDaCg6Ckj5qebgBVbT3V3NNXMSiWSDdGV3hrtzla7J+duwPOToIg42ChPQOQjspnSlp1V+Gjdged7+8UN5CRAV7a5EdFNwCjEaBR27b3W890TE7g24NAP/mMDXRWrGoFPQI9ls/MWO2dWFAar/xcOIImbbpA3zgAAAABJRU5ErkJggg==);
        }
    </style>
    <div>
        <a href="https://bokeh.org" target="_blank" class="bk-notebook-logo"></a>
        <span id="p6858">Loading BokehJS ...</span>
    </div>
</div>
<div class="cell-output cell-output-display">

<script type="application/javascript">
(function(root) {
  function now() {
    return new Date();
  }

  const force = true;

  if (typeof root._bokeh_onload_callbacks === "undefined" || force === true) {
    root._bokeh_onload_callbacks = [];
    root._bokeh_is_loading = undefined;
  }

const JS_MIME_TYPE = 'application/javascript';
  const HTML_MIME_TYPE = 'text/html';
  const EXEC_MIME_TYPE = 'application/vnd.bokehjs_exec.v0+json';
  const CLASS_NAME = 'output_bokeh rendered_html';

  /**
   * Render data to the DOM node
   */
  function render(props, node) {
    const script = document.createElement("script");
    node.appendChild(script);
  }

  /**
   * Handle when an output is cleared or removed
   */
  function handleClearOutput(event, handle) {
    const cell = handle.cell;

    const id = cell.output_area._bokeh_element_id;
    const server_id = cell.output_area._bokeh_server_id;
    // Clean up Bokeh references
    if (id != null && id in Bokeh.index) {
      Bokeh.index[id].model.document.clear();
      delete Bokeh.index[id];
    }

    if (server_id !== undefined) {
      // Clean up Bokeh references
      const cmd_clean = "from bokeh.io.state import curstate; print(curstate().uuid_to_server['" + server_id + "'].get_sessions()[0].document.roots[0]._id)";
      cell.notebook.kernel.execute(cmd_clean, {
        iopub: {
          output: function(msg) {
            const id = msg.content.text.trim();
            if (id in Bokeh.index) {
              Bokeh.index[id].model.document.clear();
              delete Bokeh.index[id];
            }
          }
        }
      });
      // Destroy server and session
      const cmd_destroy = "import bokeh.io.notebook as ion; ion.destroy_server('" + server_id + "')";
      cell.notebook.kernel.execute(cmd_destroy);
    }
  }

  /**
   * Handle when a new output is added
   */
  function handleAddOutput(event, handle) {
    const output_area = handle.output_area;
    const output = handle.output;

    // limit handleAddOutput to display_data with EXEC_MIME_TYPE content only
    if ((output.output_type != "display_data") || (!Object.prototype.hasOwnProperty.call(output.data, EXEC_MIME_TYPE))) {
      return
    }

    const toinsert = output_area.element.find("." + CLASS_NAME.split(' ')[0]);

    if (output.metadata[EXEC_MIME_TYPE]["id"] !== undefined) {
      toinsert[toinsert.length - 1].firstChild.textContent = output.data[JS_MIME_TYPE];
      // store reference to embed id on output_area
      output_area._bokeh_element_id = output.metadata[EXEC_MIME_TYPE]["id"];
    }
    if (output.metadata[EXEC_MIME_TYPE]["server_id"] !== undefined) {
      const bk_div = document.createElement("div");
      bk_div.innerHTML = output.data[HTML_MIME_TYPE];
      const script_attrs = bk_div.children[0].attributes;
      for (let i = 0; i < script_attrs.length; i++) {
        toinsert[toinsert.length - 1].firstChild.setAttribute(script_attrs[i].name, script_attrs[i].value);
        toinsert[toinsert.length - 1].firstChild.textContent = bk_div.children[0].textContent
      }
      // store reference to server id on output_area
      output_area._bokeh_server_id = output.metadata[EXEC_MIME_TYPE]["server_id"];
    }
  }

  function register_renderer(events, OutputArea) {

    function append_mime(data, metadata, element) {
      // create a DOM node to render to
      const toinsert = this.create_output_subarea(
        metadata,
        CLASS_NAME,
        EXEC_MIME_TYPE
      );
      this.keyboard_manager.register_events(toinsert);
      // Render to node
      const props = {data: data, metadata: metadata[EXEC_MIME_TYPE]};
      render(props, toinsert[toinsert.length - 1]);
      element.append(toinsert);
      return toinsert
    }

    /* Handle when an output is cleared or removed */
    events.on('clear_output.CodeCell', handleClearOutput);
    events.on('delete.Cell', handleClearOutput);

    /* Handle when a new output is added */
    events.on('output_added.OutputArea', handleAddOutput);

    /**
     * Register the mime type and append_mime function with output_area
     */
    OutputArea.prototype.register_mime_type(EXEC_MIME_TYPE, append_mime, {
      /* Is output safe? */
      safe: true,
      /* Index of renderer in `output_area.display_order` */
      index: 0
    });
  }

  // register the mime type if in Jupyter Notebook environment and previously unregistered
  if (root.Jupyter !== undefined) {
    const events = require('base/js/events');
    const OutputArea = require('notebook/js/outputarea').OutputArea;

    if (OutputArea.prototype.mime_types().indexOf(EXEC_MIME_TYPE) == -1) {
      register_renderer(events, OutputArea);
    }
  }
  if (typeof (root._bokeh_timeout) === "undefined" || force === true) {
    root._bokeh_timeout = Date.now() + 5000;
    root._bokeh_failed_load = false;
  }

  const NB_LOAD_WARNING = {'data': {'text/html':
     "<div style='background-color: #fdd'>\n"+
     "<p>\n"+
     "BokehJS does not appear to have successfully loaded. If loading BokehJS from CDN, this \n"+
     "may be due to a slow or bad network connection. Possible fixes:\n"+
     "</p>\n"+
     "<ul>\n"+
     "<li>re-rerun `output_notebook()` to attempt to load from CDN again, or</li>\n"+
     "<li>use INLINE resources instead, as so:</li>\n"+
     "</ul>\n"+
     "<code>\n"+
     "from bokeh.resources import INLINE\n"+
     "output_notebook(resources=INLINE)\n"+
     "</code>\n"+
     "</div>"}};

  function display_loaded() {
    const el = document.getElementById("p6858");
    if (el != null) {
      el.textContent = "BokehJS is loading...";
    }
    if (root.Bokeh !== undefined) {
      if (el != null) {
        el.textContent = "BokehJS " + root.Bokeh.version + " successfully loaded.";
      }
    } else if (Date.now() < root._bokeh_timeout) {
      setTimeout(display_loaded, 100)
    }
  }

  function run_callbacks() {
    try {
      root._bokeh_onload_callbacks.forEach(function(callback) {
        if (callback != null)
          callback();
      });
    } finally {
      delete root._bokeh_onload_callbacks
    }
    console.debug("Bokeh: all callbacks have finished");
  }

  function load_libs(css_urls, js_urls, callback) {
    if (css_urls == null) css_urls = [];
    if (js_urls == null) js_urls = [];

    root._bokeh_onload_callbacks.push(callback);
    if (root._bokeh_is_loading > 0) {
      console.debug("Bokeh: BokehJS is being loaded, scheduling callback at", now());
      return null;
    }
    if (js_urls == null || js_urls.length === 0) {
      run_callbacks();
      return null;
    }
    console.debug("Bokeh: BokehJS not loaded, scheduling load and callback at", now());
    root._bokeh_is_loading = css_urls.length + js_urls.length;

    function on_load() {
      root._bokeh_is_loading--;
      if (root._bokeh_is_loading === 0) {
        console.debug("Bokeh: all BokehJS libraries/stylesheets loaded");
        run_callbacks()
      }
    }

    function on_error(url) {
      console.error("failed to load " + url);
    }

    for (let i = 0; i < css_urls.length; i++) {
      const url = css_urls[i];
      const element = document.createElement("link");
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.rel = "stylesheet";
      element.type = "text/css";
      element.href = url;
      console.debug("Bokeh: injecting link tag for BokehJS stylesheet: ", url);
      document.body.appendChild(element);
    }

    for (let i = 0; i < js_urls.length; i++) {
      const url = js_urls[i];
      const element = document.createElement('script');
      element.onload = on_load;
      element.onerror = on_error.bind(null, url);
      element.async = false;
      element.src = url;
      console.debug("Bokeh: injecting script tag for BokehJS library: ", url);
      document.head.appendChild(element);
    }
  };

  function inject_raw_css(css) {
    const element = document.createElement("style");
    element.appendChild(document.createTextNode(css));
    document.body.appendChild(element);
  }

  const js_urls = ["https://cdn.bokeh.org/bokeh/release/bokeh-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-gl-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-tables-3.0.3.min.js", "https://cdn.bokeh.org/bokeh/release/bokeh-mathjax-3.0.3.min.js"];
  const css_urls = [];

  const inline_js = [    function(Bokeh) {
      Bokeh.set_log_level("info");
    },
function(Bokeh) {
    }
  ];

  function run_inline_js() {
    if (root.Bokeh !== undefined || force === true) {
          for (let i = 0; i < inline_js.length; i++) {
      inline_js[i].call(root, root.Bokeh);
    }
if (force === true) {
        display_loaded();
      }} else if (Date.now() < root._bokeh_timeout) {
      setTimeout(run_inline_js, 100);
    } else if (!root._bokeh_failed_load) {
      console.log("Bokeh: BokehJS failed to load within specified timeout.");
      root._bokeh_failed_load = true;
    } else if (force !== true) {
      const cell = $(document.getElementById("p6858")).parents('.cell').data().cell;
      cell.output_area.append_execute_result(NB_LOAD_WARNING)
    }
  }

  if (root._bokeh_is_loading === 0) {
    console.debug("Bokeh: BokehJS loaded, going straight to plotting");
    run_inline_js();
  } else {
    load_libs(css_urls, js_urls, function() {
      console.debug("Bokeh: BokehJS plotting callback run at", now());
      run_inline_js();
    });
  }
}(window));
</script>
</div>
<div class="cell-output cell-output-display">

  <div id="48620567-adb2-446c-b25b-92498ca97f5c" data-root-id="p6726" style="display: contents;"></div>
</div>
<div class="cell-output cell-output-display">
<script type="application/javascript">
(function(root) {
  function embed_document(root) {
  const docs_json = {"ab12759e-a962-4e2b-9e26-a0a4608f46f8":{"version":"3.0.3","title":"Bokeh Application","defs":[],"roots":[{"type":"object","name":"Figure","id":"p6726","attributes":{"x_range":{"type":"object","name":"Range1d","id":"p6724","attributes":{"start":-10.1,"end":10.1}},"y_range":{"type":"object","name":"Range1d","id":"p6725","attributes":{"start":-10.1,"end":10.1}},"x_scale":{"type":"object","name":"LinearScale","id":"p6738"},"y_scale":{"type":"object","name":"LinearScale","id":"p6740"},"title":{"type":"object","name":"Title","id":"p6729","attributes":{"text":"Harry Potter Book 7 Network"}},"renderers":[{"type":"object","name":"GraphRenderer","id":"p6767","attributes":{"layout_provider":{"type":"object","name":"StaticLayoutProvider","id":"p6798","attributes":{"graph_layout":{"type":"map","entries":[[5,{"type":"ndarray","array":{"type":"bytes","data":"BpuU4a26t78+JC6PnhnNvw=="},"shape":[2],"dtype":"float64","order":"little"}],[4,{"type":"ndarray","array":{"type":"bytes","data":"igthhT4+5b81eh9XAkYNQA=="},"shape":[2],"dtype":"float64","order":"little"}],[23,{"type":"ndarray","array":{"type":"bytes","data":"jjwAJHez8b/njkLRQLcYQA=="},"shape":[2],"dtype":"float64","order":"little"}],[13,{"type":"ndarray","array":{"type":"bytes","data":"fSRR7XuY6r98k5+lRXL7vw=="},"shape":[2],"dtype":"float64","order":"little"}],[15,{"type":"ndarray","array":{"type":"bytes","data":"NkZT37gwAEDaIenaS0IgwA=="},"shape":[2],"dtype":"float64","order":"little"}],[9,{"type":"ndarray","array":{"type":"bytes","data":"UqLAMa5A8L9a2GONxFT2Pw=="},"shape":[2],"dtype":"float64","order":"little"}],[27,{"type":"ndarray","array":{"type":"bytes","data":"aa5fnepZjj+hRcSotBEKwA=="},"shape":[2],"dtype":"float64","order":"little"}],[19,{"type":"ndarray","array":{"type":"bytes","data":"4cJMczhWEkDROrK1xp/yPw=="},"shape":[2],"dtype":"float64","order":"little"}],[16,{"type":"ndarray","array":{"type":"bytes","data":"2tOHJkMA/z+GbzEHjiXyvw=="},"shape":[2],"dtype":"float64","order":"little"}],[25,{"type":"ndarray","array":{"type":"bytes","data":"4xobs1h9EECCuk/K4UoQwA=="},"shape":[2],"dtype":"float64","order":"little"}],[6,{"type":"ndarray","array":{"type":"bytes","data":"vh8uEHyAEkDPVMmcLnQdwA=="},"shape":[2],"dtype":"float64","order":"little"}],[12,{"type":"ndarray","array":{"type":"bytes","data":"zUr5NtRI0z+HdXui34L2Pw=="},"shape":[2],"dtype":"float64","order":"little"}],[20,{"type":"ndarray","array":{"type":"bytes","data":"cGnJPAcXB8BoL9Rh+ujzvw=="},"shape":[2],"dtype":"float64","order":"little"}],[24,{"type":"ndarray","array":{"type":"bytes","data":"8aNX8I6qDcCkQfC4vywGwA=="},"shape":[2],"dtype":"float64","order":"little"}],[10,{"type":"ndarray","array":{"type":"bytes","data":"QMVRwL+g+z80A1HNlgvjPw=="},"shape":[2],"dtype":"float64","order":"little"}],[17,{"type":"ndarray","array":{"type":"bytes","data":"eMThjclHGcAcv4pfxDUBwA=="},"shape":[2],"dtype":"float64","order":"little"}],[7,{"type":"ndarray","array":{"type":"bytes","data":"adjcnqHUDsAttMs7TBobQA=="},"shape":[2],"dtype":"float64","order":"little"}],[18,{"type":"ndarray","array":{"type":"bytes","data":"fGNN/TrYAcDaL3yMbF8VwA=="},"shape":[2],"dtype":"float64","order":"little"}],[22,{"type":"ndarray","array":{"type":"bytes","data":"w4Y1NRY/EEBdTfV2L4/yvw=="},"shape":[2],"dtype":"float64","order":"little"}],[0,{"type":"ndarray","array":{"type":"bytes","data":"wKzPAalyEMDDIia4UkMOQA=="},"shape":[2],"dtype":"float64","order":"little"}],[26,{"type":"ndarray","array":{"type":"bytes","data":"9abOdpKtE8D1Rwohiin5Pw=="},"shape":[2],"dtype":"float64","order":"little"}],[14,{"type":"ndarray","array":{"type":"bytes","data":"Dr5rnV3o8z+eGcxJ+z8NQA=="},"shape":[2],"dtype":"float64","order":"little"}],[8,{"type":"ndarray","array":{"type":"bytes","data":"SYgpFCC8FUD/8xsdVsMQQA=="},"shape":[2],"dtype":"float64","order":"little"}],[2,{"type":"ndarray","array":{"type":"bytes","data":"ZfRngCVDA0Bw7UFXOn8GwA=="},"shape":[2],"dtype":"float64","order":"little"}],[3,{"type":"ndarray","array":{"type":"bytes","data":"vsKa/wmsCsDFkFxlF5n3Pw=="},"shape":[2],"dtype":"float64","order":"little"}],[1,{"type":"ndarray","array":{"type":"bytes","data":"O/a0Zlx3CUD12Xaz+lUVQA=="},"shape":[2],"dtype":"float64","order":"little"}],[11,{"type":"ndarray","array":{"type":"bytes","data":"AAAAAAAAJMBZIxxT5z4EQA=="},"shape":[2],"dtype":"float64","order":"little"}],[21,{"type":"ndarray","array":{"type":"bytes","data":"dZehxI3QIkD+EbA5qqoCwA=="},"shape":[2],"dtype":"float64","order":"little"}]]}}},"node_renderer":{"type":"object","name":"GlyphRenderer","id":"p6773","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p6770","attributes":{"selected":{"type":"object","name":"Selection","id":"p6772","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p6771"},"data":{"type":"map","entries":[["charname",["Harry","Malfoy","Narcissa","Lupin","Dudley","Hermione","Hagrid","Albus","Dumbledore","Petunia","Vernon","Ron","George","Tonks","Fleur","Molly","Crabbe","Ted","James","Slughorn","Percy","Luna","Viktor","Lily","Neville","Dobby","Patil","Helena"]],["index",[5,4,23,13,15,9,27,19,16,25,6,12,20,24,10,17,7,18,22,0,26,14,8,2,3,1,11,21]]]}}},"view":{"type":"object","name":"CDSView","id":"p6774","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p6775"}}},"glyph":{"type":"object","name":"Circle","id":"p6799","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"fill_color":{"type":"field","field":"modularity_color"}}},"selection_glyph":{"type":"object","name":"Circle","id":"p6815","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":"white"}}},"hover_glyph":{"type":"object","name":"Circle","id":"p6807","attributes":{"size":{"type":"field","field":"adjusted_node_size"},"line_width":{"type":"value","value":2},"fill_color":{"type":"value","value":"white"}}}}},"edge_renderer":{"type":"object","name":"GlyphRenderer","id":"p6781","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p6778","attributes":{"selected":{"type":"object","name":"Selection","id":"p6780","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p6779"},"data":{"type":"map","entries":[["Weight",[72,20,44,1059,201,56,507,21,62,56,62,142,12,1005,20,75,24,45,11,20,129,38,67,1,41,1,5,7,16,5,8,1,1,17,1,2,1,1,2,1,4,3,1,28,9,1,13,25,14,1,32,6,9,1,3,1,5,13,16,2,1,79,760,15,26,17,8,1,2,2,24,6,4,12,2,2,4,4,4,1,2,16,6,3,8,1,5,2,2,1,1,1,59,1,6,1,7,6,2,5,79,3,5,5,12,2,3,2,1,4,7,1,2,8,1,1,1,32,16,9,22,2,32,3,19,1,4,4,4,5,3,14,2,6,1,1,1,11,3,3,1,1,4,9,2,1,3,20,3,2,1,3,11,7,1]],["start",[5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,4,4,4,4,4,4,4,4,4,4,4,23,23,23,23,23,13,13,13,13,13,13,13,13,13,13,13,13,13,13,15,15,15,15,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,27,27,27,27,27,27,27,27,27,27,27,27,27,19,19,19,19,19,19,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,25,25,25,25,25,12,12,12,12,12,12,12,12,12,12,12,12,12,20,20,20,20,20,20,24,24,24,24,24,10,10,10,17,7,22,22,0,26,14,14,14,3]],["end",[4,23,15,9,27,19,16,25,6,20,24,13,17,12,7,10,18,22,0,26,14,2,3,8,1,11,21,23,9,16,12,14,27,7,26,2,0,19,13,9,12,1,26,24,10,25,27,12,20,19,9,22,16,18,26,17,2,25,6,16,27,16,12,20,10,27,24,17,0,8,14,26,18,3,22,2,1,19,7,25,6,12,10,18,24,17,20,16,14,2,3,22,16,25,12,1,2,22,6,20,12,0,10,22,2,18,14,24,8,1,3,21,25,6,12,10,22,2,20,24,10,0,14,8,3,18,2,1,7,26,22,10,24,26,14,17,2,18,10,17,26,3,26,14,1,0,3,2,3,14,3,8,3,1,11]]]}}},"view":{"type":"object","name":"CDSView","id":"p6782","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p6783"}}},"glyph":{"type":"object","name":"MultiLine","id":"p6823","attributes":{"line_alpha":{"type":"value","value":0.3}}},"selection_glyph":{"type":"object","name":"MultiLine","id":"p6831","attributes":{"line_width":{"type":"value","value":2}}},"hover_glyph":{"type":"object","name":"MultiLine","id":"p6839","attributes":{"line_width":{"type":"value","value":2}}}}},"selection_policy":{"type":"object","name":"NodesAndLinkedEdges","id":"p6847"},"inspection_policy":{"type":"object","name":"NodesAndLinkedEdges","id":"p6849"}}},{"type":"object","name":"LabelSet","id":"p6854","attributes":{"source":{"type":"object","name":"ColumnDataSource","id":"p6851","attributes":{"selected":{"type":"object","name":"Selection","id":"p6853","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p6852"},"data":{"type":"map","entries":[["x",[-0.09269224889122193,-0.6638481717167093,-1.1063147932325452,-0.831113780507749,2.0237901160515106,-1.0157911246734739,0.014819939544359078,4.584199716148505,1.9375640397167815,4.122408674744949,4.625473263564286,0.30132012718710827,-2.8862442730871223,-3.708280446695874,1.7267453682400884,-6.3201048058555145,-3.853823891749063,-2.230581263469899,4.061608153717034,-4.111972835827316,-4.919504028666542,1.244229903149861,5.433716120753226,2.4077863723492094,-3.334003445539877,3.1832817100501223,-10.0,9.407331604695836]],["y",[-0.22734434119436914,3.6591841513138896,6.178958196341887,-1.7153984517728693,-8.129484978636288,1.3956952593848855,-3.258645361413713,1.1640078637607767,-1.134168651674345,-4.073126946560139,-7.363459062374388,1.4069515559161532,-1.2443794080199613,-2.771850056488079,0.5951646814429297,-2.151253458425243,6.77568143301782,-5.343187518195885,-1.1599573752217431,3.782872618354618,1.5726414957648533,3.6562410130893133,4.1907581852256035,-2.8121229950899576,1.4748758277356029,5.333964161042322,2.530714654251295,-2.333332491574992]],["name",["Harry","Malfoy","Narcissa","Lupin","Dudley","Hermione","Hagrid","Albus","Dumbledore","Petunia","Vernon","Ron","George","Tonks","Fleur","Molly","Crabbe","Ted","James","Slughorn","Percy","Luna","Viktor","Lily","Neville","Dobby","Patil","Helena"]]]}}},"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"text":{"type":"field","field":"name"},"text_font_size":{"type":"value","value":"10px"},"background_fill_color":{"type":"value","value":"white"},"background_fill_alpha":{"type":"value","value":0.7}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p6735","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p6756"},{"type":"object","name":"WheelZoomTool","id":"p6757"},{"type":"object","name":"SaveTool","id":"p6758"},{"type":"object","name":"ResetTool","id":"p6759"},{"type":"object","name":"HoverTool","id":"p6760","attributes":{"renderers":"auto","tooltips":[["Character","@index"],["Degree","@degree"],["Modularity Class","@modularity_class"],["Modularity Color","$color[swatch]:modularity_color"]]}}],"active_scroll":{"id":"p6757"}}},"left":[{"type":"object","name":"LinearAxis","id":"p6749","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p6750","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p6751"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p6752"}}}],"below":[{"type":"object","name":"LinearAxis","id":"p6742","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p6743","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p6744"},"major_label_policy":{"type":"object","name":"AllLabels","id":"p6745"}}}],"center":[{"type":"object","name":"Grid","id":"p6748","attributes":{"axis":{"id":"p6742"}}},{"type":"object","name":"Grid","id":"p6755","attributes":{"dimension":1,"axis":{"id":"p6749"}}}]}}]}};
  const render_items = [{"docid":"ab12759e-a962-4e2b-9e26-a0a4608f46f8","roots":{"p6726":"48620567-adb2-446c-b25b-92498ca97f5c"},"root_ids":["p6726"]}];
  root.Bokeh.embed.embed_items_notebook(docs_json, render_items);
  }
  if (root.Bokeh !== undefined) {
    embed_document(root);
  } else {
    let attempts = 0;
    const timer = setInterval(function(root) {
      if (root.Bokeh !== undefined) {
        clearInterval(timer);
        embed_document(root);
      } else {
        attempts++;
        if (attempts > 100) {
          clearInterval(timer);
          console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
        }
      }
    }, 10, root)
  }
})(window);
</script>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/tmp/ipykernel_284/446730918.py:103: UserWarning: save() called but no resources were supplied and output_file(...) was never called, defaulting to resources.CDN
  save(plot, filename=f"{title}.html")
/tmp/ipykernel_284/446730918.py:103: UserWarning: save() called but no title was supplied and output_file(...) was never called, using default title 'Bokeh Plot'
  save(plot, filename=f"{title}.html")</code></pre>
</div>
</div>
<p>In the network graph for book 1, we can see that Harry Potter is at the center of the graph with many connections with other characters. This is unsurprising, since he is the main character. We also see through connections between Harry Potter and Dumbledore, Hagrid, Hermione, Vernon, Lily, and Dudley. Knowing the plot of the first book, we know that this makes sense because Harry has many interactions with Dudley and Vernon Dursley at the beginning of the book as we begin to understand his origins. Then, he gets whisked away to Hogwarts by Hagrid and meets characters like Dumbledore, Malfoy, Hermione, and Ron. We can see a slight separation in the graph between Harry’s Hogwarts connections and his Muggles relationships.</p>
<p>A comparison between the network graphs for book 1 and 7 demonstrates how the relationships become much more intricate and complex. This makes sense because the plot has greatly developed over the course of 7 books and we are introduced to many more characters. Harry Potter is still at the center of the graph, but there is no longer a separation between groups in the relationships. This is because Harry Potter becomes immersed in the wizarding world, and thus has many more interactions between other wizards. His closest friends, Hermione and Ron, are still very close connections to him, as well as Dumbledore and Hagrid.</p>
</section>
</section>
<section id="discussion" class="level2">
<h2 class="anchored" data-anchor-id="discussion">Discussion</h2>
<p>Using sentiment analysis and network graph analysis allows us to see interesting similarities and differences across the 7 <em>Harry Potter</em> books.</p>
<section id="sentiment-analysis-1" class="level3">
<h3 class="anchored" data-anchor-id="sentiment-analysis-1">Sentiment Analysis</h3>
<p>Performing the sentiment analysis with pairs of books with similar word counts demonstrates how most of the books follow a pretty similar structure. This suggests there may be a pattern for how the tone of the books rise and fall; for example, books 1 and 2 changes sentiment up and down over the course of each book, but both end with a drastic drop in sentiment and then a rise in positive sentiment.</p>
<p>Because sentiment analysis generally corresponds to the rising and falling of the plot, we can hypothesize that these changes in sentiment may have contributed to a successful formula that led to the popularity of these books. Perhaps readers enjoy books with lots of twist and turns instead of ones with a flat sentiment over the entire course of the book. Maybe for a series of books, it is good to have a hopeful ending at the end of each book after the characters go through a challenging experience with negative emotions.</p>
<p>Looking at this sentiment analysis can be useful to not only understand more deeply about the <em>Harry Potter</em> series, but can also be compared against other book series to find similarities and differences. I would be curious to see how other popular book series compare in their sentiment analysis and if they follow a similar evolution in sentiment. If so, that may form a hypothesis on what plotlines may correlate with book popularity and success.</p>
</section>
<section id="network-graph-analysis" class="level3">
<h3 class="anchored" data-anchor-id="network-graph-analysis">Network Graph Analysis</h3>
<p>The network graph analysis is very interesting to show the changes over the course of the <em>Harry Potter</em> series. As expected, we see how the main character Harry Potter’s relationships grow increasingly complex as we are introduced to more and more characters.</p>
<p>Network graph analysis is useful to better understand the dynamics of the relationships. We may also spot things we may not have noticed before without a graph; for example, in the first book, we see how Harry Potter’s relationships are grouped by Muggles and Wizards, something that may not be immediately clear when just looking at raw data. We can also see recurring characters who always remain in Harry Potter’s close circle, such as Hermione, Ron, and Dumbledore. From this network graph, we can also glean which characters are the most important in Harry Potter’s life, as counted by their number of interactions together.</p>
<p>Generally speaking, network graphs are very useful for people to easily understand data, particularly for character relationships. Simply looking at numbers, like the number of interactions between characters, is extremely hard to understand. In a graph format, we can also see subgroups that may represent different relationship worlds within the text. With an even more in depth graph, it may also be possible to label the vertices with the type of relationship between characters, which may further increase people’s understanding of overall relationships. Especially for text that may have a lot of characters, these graphs can be useful for people to reference so they know who is who.</p>
<p>Overall, we can use these analyses to better understand the <em>Harry Potter</em> books. We can try to see patterns of the plotlines, as well as map out the character relationships. This can lead to a deeper understanding and enjoyment of the books beyond the words within the text.</p>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>